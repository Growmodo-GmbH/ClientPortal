{"version":3,"file":"js/966.d3f206d9.js","mappings":"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","sources":["webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?2aa4","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?70bb","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?e025"],"sourcesContent":["<template>\n  <q-layout v-if=\"isValidStatus\" view=\"LHh lpR lFf\">\n    <q-drawer\n      show-if-above\n      v-model=\"rightDrawer\"\n      side=\"right\"\n      class=\"bg-color text-primary\"\n      :width=\"630\"\n      :breakpoint=\"1080\"\n    >\n      <div class=\"fit flex flex-center q-pl-xl\">\n        <q-img\n          src=\"/images/ScreenMockup.png\"\n          class=\"q-ml-xl overflow-hidden\"\n          img-class=\"border-add border-primary border-xl rounded-left\"\n          :img-style=\"{ borderWidth: '5px', borderRight: '0' }\"\n          loading=\"lazy\"\n          style=\"height: 80vh\"\n          spinner-color=\"secondary\"\n          position=\"0 50%\"\n        />\n      </div>\n    </q-drawer>\n\n    <q-page-container>\n      <q-page padding class=\"container flex flex-center\">\n        <div class=\"absolute-top-left q-mt-lg q-pl-md\">\n          <q-btn\n            outline\n            no-caps\n            unelevated\n            :ripple=\"{ color: 'accent' }\"\n            color=\"primary\"\n            class=\"rounded slide-hover full-width text-body1 font-medium button-lg\"\n            to=\"/\"\n            @click.prevent=\"back2home\"\n          >\n            <q-icon size=\"sm\" name=\"icon-arrow-narrow-left\" class=\"q-pr-xs\" />\n            Back to Growmodo\n          </q-btn>\n        </div>\n\n        <q-card flat>\n          <q-card-section class=\"text-center\">\n            <q-icon\n              v-if=\"isCanceledStatus\"\n              size=\"5em\"\n              name=\"icon-alert-triangle\"\n              color=\"negative\"\n            />\n            <q-icon\n              v-else-if=\"tokenFailed\"\n              size=\"5em\"\n              name=\"icon-alert-circle\"\n              color=\"negative\"\n            />\n            <q-spinner-hourglass v-else color=\"secondary\" size=\"5em\" />\n          </q-card-section>\n          <q-card-section class=\"text-center\">\n            <div class=\"text-h3 font-medium\">\n              {{\n                isCanceledStatus\n                  ? 'Checkout cancelled'\n                  : tokenFailed\n                  ? 'Token Expired'\n                  : 'Verifying status...'\n              }}\n            </div>\n            <div class=\"text-subtitle1\">\n              {{ message }}\n            </div>\n          </q-card-section>\n        </q-card>\n      </q-page>\n    </q-page-container>\n  </q-layout>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { mapActions } from 'pinia';\nimport useUsers from 'stores/user';\nimport { extractErrorMessageString } from 'src/assets/scripts/functions';\n\nexport default defineComponent({\n  name: 'CheckoutStatus',\n\n  data() {\n    return {\n      rightDrawer: false,\n      tokenFailed: false,\n      message: `Checking your account's subscription status.`,\n    };\n  },\n\n  computed: {\n    checkoutStatus() {\n      return this.$route.params?.status;\n    },\n\n    isSuccessStatus() {\n      return this.checkoutStatus.toLowerCase() == 'success';\n    },\n\n    isCanceledStatus() {\n      return this.checkoutStatus.toLowerCase() == 'cancelled';\n    },\n\n    isValidStatus() {\n      return this.isSuccessStatus || this.isCanceledStatus;\n    },\n\n    paymentToken() {\n      return this.$route.query?.token;\n    },\n  },\n\n  mounted() {\n    if (!this.isValidStatus) {\n      this.$router.replace('/');\n    } else {\n      if (this.isSuccessStatus && this.paymentToken) {\n        this.testLoginToken();\n      } else {\n        this.message = 'Checkout has been cancelled.';\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions(useUsers, ['loginWithPaymentToken']),\n\n    async testLoginToken() {\n      if (!this.paymentToken) return;\n      const response = await this.loginWithPaymentToken(this.paymentToken);\n      let message = extractErrorMessageString(response?.message);\n      if (response.success) {\n        if (!message) message = 'Payment token has been verified.';\n        this.$q.notify({\n          icon: 'icon-check-circle-broken',\n          message,\n        });\n        this.$router.push('/');\n      } else {\n        if (!message) message = 'Invalid payment token!';\n        this.$q.notify({\n          icon: 'icon-alert-triangle',\n          iconColor: 'negative',\n          message,\n        });\n        this.tokenFailed = true;\n      }\n      this.message = message;\n    },\n\n    back2home() {\n      window.location.href = '/';\n    },\n  },\n});\n</script>\n","export * from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=template&id=4a62a280\"","export { default } from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=script&lang=js\"","import { render } from \"./CheckoutPage.vue?vue&type=template&id=4a62a280\"\nimport script from \"./CheckoutPage.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/mikesaraus/Downloads/Github/growmodo_hub/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QDrawer from 'quasar/src/components/drawer/QDrawer.js';\nimport QImg from 'quasar/src/components/img/QImg.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QSpinnerHourglass from 'quasar/src/components/spinner/QSpinnerHourglass.js';\nimport qInstall from \"../../../node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js\";\nqInstall(script, 'components', {QLayout,QDrawer,QImg,QPageContainer,QPage,QBtn,QIcon,QCard,QCardSection,QSpinnerHourglass});\n"],"names":["class","_ctx","_createBlock","_component_q_layout","view","_createVNode","_component_q_drawer","side","width","breakpoint","_createElementVNode","_hoisted_1","_component_q_img","src","borderWidth","borderRight","loading","style","position","_component_q_page_container","_component_q_page","padding","_hoisted_2","_component_q_btn","outline","unelevated","ripple","color","to","onClick","_component_q_icon","size","name","_component_q_card","flat","_component_q_card_section","_component_q_spinner_hourglass","_hoisted_3","_hoisted_4","defineComponent","mapActions","useUsers","extractErrorMessageString","data","rightDrawer","tokenFailed","message","computed","checkoutStatus","$route","params","status","isSuccessStatus","toLowerCase","isCanceledStatus","isValidStatus","paymentToken","query","token","mounted","$router","replace","testLoginToken","methods","response","loginWithPaymentToken","success","$q","notify","icon","push","iconColor","back2home","window","location","href"],"sourceRoot":""}