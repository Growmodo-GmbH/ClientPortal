{"version":3,"file":"js/966.9f889f7f.js","mappings":"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","sources":["webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?2aa4","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?70bb","webpack://growmodo_hub/./src/pages/Misc/CheckoutPage.vue?e025"],"sourcesContent":["<template>\n  <q-layout v-if=\"isValidStatus\" view=\"LHh lpR lFf\">\n    <q-drawer\n      show-if-above\n      v-model=\"rightDrawer\"\n      side=\"right\"\n      class=\"bg-color text-primary\"\n      :width=\"630\"\n      :breakpoint=\"1080\"\n    >\n      <div class=\"fit flex flex-center q-pl-xl\">\n        <q-img\n          src=\"/images/ScreenMockup.png\"\n          class=\"q-ml-xl overflow-hidden\"\n          img-class=\"border-add border-primary border-xl rounded-left\"\n          :img-style=\"{ borderWidth: '5px', borderRight: '0' }\"\n          loading=\"lazy\"\n          style=\"height: 80vh\"\n          spinner-color=\"secondary\"\n          position=\"0 50%\"\n        />\n      </div>\n    </q-drawer>\n\n    <q-page-container>\n      <q-page padding class=\"container flex flex-center\">\n        <div class=\"absolute-top-left q-mt-lg q-pl-md\">\n          <q-btn\n            outline\n            no-caps\n            unelevated\n            :ripple=\"{ color: 'accent' }\"\n            color=\"primary\"\n            class=\"rounded slide-hover full-width text-body1 font-medium button-lg\"\n            to=\"/\"\n            @click.prevent=\"back2home\"\n          >\n            <q-icon size=\"sm\" name=\"icon-arrow-narrow-left\" class=\"q-pr-xs\" />\n            Back to Growmodo\n          </q-btn>\n        </div>\n\n        <q-card flat>\n          <q-card-section class=\"text-center\">\n            <q-icon\n              v-if=\"isCanceledStatus\"\n              size=\"5em\"\n              name=\"icon-alert-triangle\"\n              color=\"negative\"\n            />\n            <q-icon\n              v-else-if=\"tokenFailed\"\n              size=\"5em\"\n              name=\"icon-alert-circle\"\n              color=\"negative\"\n            />\n            <q-spinner-hourglass v-else color=\"secondary\" size=\"5em\" />\n          </q-card-section>\n          <q-card-section class=\"text-center\">\n            <div class=\"text-h3 font-medium\">\n              {{\n                isCanceledStatus\n                  ? 'Checkout cancelled'\n                  : tokenFailed\n                  ? 'Token Expired'\n                  : 'Verifying status...'\n              }}\n            </div>\n            <div class=\"text-subtitle1\">\n              {{ message }}\n            </div>\n          </q-card-section>\n        </q-card>\n      </q-page>\n    </q-page-container>\n  </q-layout>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { mapActions } from 'pinia';\nimport useUsers from 'stores/user';\nimport { extractErrorMessageString } from 'src/assets/scripts/functions';\n\nexport default defineComponent({\n  name: 'CheckoutStatus',\n\n  data() {\n    return {\n      rightDrawer: false,\n      tokenFailed: false,\n      message: `Checking your account's subscription status.`,\n    };\n  },\n\n  computed: {\n    checkoutStatus() {\n      return this.$route.params?.status;\n    },\n\n    isSuccessStatus() {\n      return this.checkoutStatus.toLowerCase() == 'success';\n    },\n\n    isCanceledStatus() {\n      return this.checkoutStatus.toLowerCase() == 'cancelled';\n    },\n\n    isValidStatus() {\n      return this.isSuccessStatus || this.isCanceledStatus;\n    },\n\n    paymentToken() {\n      return this.$route.query?.token;\n    },\n  },\n\n  mounted() {\n    if (!this.isValidStatus) {\n      this.$router.replace('/');\n    } else {\n      if (this.isSuccessStatus && this.paymentToken) {\n        this.testLoginToken();\n      } else {\n        this.message = 'Checkout has been cancelled.';\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions(useUsers, ['loginWithPaymentToken']),\n\n    async testLoginToken() {\n      if (!this.paymentToken) return;\n      const response = await this.loginWithPaymentToken(this.paymentToken);\n      let message = extractErrorMessageString(response?.message);\n      if (response.success) {\n        if (!message) message = 'Payment token has been verified.';\n        this.$q.notify({\n          icon: 'icon-check-circle-broken',\n          message,\n        });\n        this.$router.push('/');\n      } else {\n        if (!message) message = 'Invalid payment token!';\n        this.$q.notify({\n          icon: 'icon-alert-triangle',\n          iconColor: 'negative',\n          message,\n        });\n        this.tokenFailed = true;\n      }\n      this.message = message;\n    },\n\n    back2home() {\n      window.location.href = '/';\n    },\n  },\n});\n</script>\n","export * from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=template&id=4a62a280\"","export { default } from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./CheckoutPage.vue?vue&type=script&lang=js\"","import { render } from \"./CheckoutPage.vue?vue&type=template&id=4a62a280\"\nimport script from \"./CheckoutPage.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/mikesaraus/Downloads/Github/growmodo_hub/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QDrawer from 'quasar/src/components/drawer/QDrawer.js';\nimport QImg from 'quasar/src/components/img/QImg.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QSpinnerHourglass from 'quasar/src/components/spinner/QSpinnerHourglass.js';\nimport qInstall from \"../../../node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js\";\nqInstall(script, 'components', {QLayout,QDrawer,QImg,QPageContainer,QPage,QBtn,QIcon,QCard,QCardSection,QSpinnerHourglass});\n"],"names":["class","_ctx","isValidStatus","_createBlock","_component_q_layout","view","_createVNode","_component_q_drawer","rightDrawer","$event","side","width","breakpoint","_createElementVNode","_hoisted_1","_component_q_img","src","borderWidth","borderRight","loading","style","position","_component_q_page_container","_component_q_page","padding","_hoisted_2","_component_q_btn","outline","unelevated","ripple","color","to","onClick","_withModifiers","back2home","_component_q_icon","size","name","_component_q_card","flat","_component_q_card_section","isCanceledStatus","tokenFailed","_component_q_spinner_hourglass","_hoisted_3","_toDisplayString","_hoisted_4","message","defineComponent","mapActions","useUsers","extractErrorMessageString","data","computed","checkoutStatus","$route","params","status","isSuccessStatus","toLowerCase","paymentToken","query","token","mounted","$router","replace","testLoginToken","methods","response","loginWithPaymentToken","success","$q","notify","icon","push","iconColor","window","location","href"],"sourceRoot":""}