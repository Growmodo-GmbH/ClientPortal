"use strict";(globalThis["webpackChunkgrowmodo_hub"]=globalThis["webpackChunkgrowmodo_hub"]||[]).push([[66],{2066:(e,n,t)=>{t.r(n),t.d(n,{default:()=>L});var o=t(9835);function s(e,n,t,s,i,a){const l=(0,o.up)("AuthorizationForm"),r=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(r,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{onSuccess:e.onLoginResponse,onFailed:e.onLoginResponse},null,8,["onSuccess","onFailed"])])),_:1})}const i=(0,o.Uk)("Authentication"),a={class:"row"},l=(0,o._)("span",{class:"text-body1 font-medium"},"Login",-1),r=(0,o.Uk)(" Verifying ");function u(e,n,t,s,u,c){const d=(0,o.up)("q-icon"),p=(0,o.up)("q-toolbar-title"),m=(0,o.up)("q-toolbar"),g=(0,o.up)("q-input"),h=(0,o.up)("InputPassword"),w=(0,o.up)("q-space"),_=(0,o.up)("q-spinner"),y=(0,o.up)("q-btn"),f=(0,o.up)("q-form"),b=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(b,{style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{size:"lg",color:"primary",name:"img:favicon.png"}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[i])),_:1})])),_:1}),(0,o.Wm)(f,{onSubmit:e.loginWithPwd,ref:"authorization_form",class:"q-pa-md q-gutter-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(g,{rounded:"",outlined:"",autofocus:"",clearable:"","lazy-rules":"",autocomplete:"","clear-icon":"icon-x-close",label:"Username or Userid",modelValue:e.u_useridentity,"onUpdate:modelValue":n[0]||(n[0]=n=>e.u_useridentity=n),rules:[n=>e.checker.input(!!n||"",250)]},{prepend:(0,o.w5)((()=>[(0,o.Wm)(d,{size:"xs",name:"icon-user-03"})])),_:1},8,["modelValue","rules"])]),(0,o._)("div",null,[(0,o.Wm)(h,{withicon:"",rounded:"",outlined:"",clearable:"","lazy-rules":"",autocomplete:"",dense:!1,label:"Password","clear-icon":"icon-x-close",modelValue:e.u_password,"onUpdate:modelValue":n[1]||(n[1]=n=>e.u_password=n),rules:[n=>e.checker.input(!!n||"",250)]},null,8,["modelValue","rules"])]),(0,o._)("div",a,[(0,o.Wm)(w),(0,o.Wm)(y,{ripple:"","no-caps":"",rounded:"",size:"16px",unelevated:"",color:"primary",class:"q-px-xl q-py-sm",loading:e.decrypting.status,percentage:e.decrypting.percentage,onClick:e.submitValidation},{loading:(0,o.w5)((()=>[(0,o.Wm)(_,{size:"xs",class:"on-left"}),r])),default:(0,o.w5)((()=>[l])),_:1},8,["loading","percentage","onClick"])])])),_:1},8,["onSubmit"])])),_:1})}var c=t(4877),d=t(8201),p=t(1809),m=t(7838);const g=(0,o.aZ)({name:"AuthorizationForm",data(){return{checker:c.ZZ,loginAnimate:null,u_useridentity:null,u_password:null,interval:null,login_response:null,decrypting:{status:!1,percentage:0}}},watch:{login_response:{async handler(e){e&&((0,c.NS)(this.loginAnimate),setTimeout((()=>{this.decrypting.status=!1}),500))},deep:!0}},emits:["success","failed","loading"],methods:{...(0,p.nv)(m.Z,["loginWithPassword"]),submitValidation(){const e=this.$refs.authorization_form;e&&e.submit()},async loginWithPwd(){var e;this.loginLoading(),this.login_response=null;const n={username:this.u_useridentity,password:this.u_password};this.$emit("loading",n),console.log("Trying API",n);const t=await this.loginWithPassword(n);this.login_response=t||{},console.log(this.login_response),this.$emit(null!==(e=this.login_response)&&void 0!==e&&e.success?"success":"failed",this.login_response||{})},async loginLoading(e){this.decrypting.status=!0,this.loginAnimate=setInterval((()=>{this.decrypting.percentage+=Math.floor(8*Math.random()+10),this.decrypting.percentage>=100&&(e&&e(),this.decrypting.status=!1,(0,c.NS)(this.loginAnimate))}),1e3)}},components:{InputPassword:d.Z}});var h=t(1639),w=t(9892),_=t(1663),y=t(2857),f=t(1973),b=t(8326),Z=t(6611),v=t(136),q=t(4455),x=t(3902),W=t(9984),z=t.n(W);const k=(0,h.Z)(g,[["render",u]]),A=k;z()(g,"components",{QCard:w.Z,QToolbar:_.Z,QIcon:y.Z,QToolbarTitle:f.Z,QForm:b.Z,QInput:Z.Z,QSpace:v.Z,QBtn:q.Z,QSpinner:x.Z});const P=(0,o.aZ)({name:"AuthorizationPage",data(){return{title:"Authorization"}},components:{AuthorizationForm:A},async mounted(){this.$root.setMeta({title:this.title})},methods:{onLoginResponse(e){console.log(e),null!==e&&void 0!==e&&e.success&&this.redirectOnLogin()},redirectOnLogin(){this.$router.push(this.$route.query.redirect||"/")}}});var Q=t(9885);const V=(0,h.Z)(P,[["render",s]]),L=V;z()(P,"components",{QPage:Q.Z})}}]);