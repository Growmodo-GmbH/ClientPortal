"use strict";
(globalThis["webpackChunkgrowmodo_hub"] = globalThis["webpackChunkgrowmodo_hub"] || []).push([[550],{

/***/ 82550:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ TaskOverview)
});

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var es_array_push = __webpack_require__(69665);
// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm-bundler.js + 6 modules
var vue_esm_bundler = __webpack_require__(56646);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/Brands/TaskOverview.vue?vue&type=template&id=ea85c3da


const _hoisted_1 = {
  class: "row q-col-gutter-md items-center q-pb-lg"
};
const _hoisted_2 = {
  class: "flex flex-start"
};
const _hoisted_3 = {
  key: 0
};
const _hoisted_4 = {
  class: "col-12 col-sm-auto"
};
const _hoisted_5 = {
  class: "q-pt-md q-pb-sm",
  id: "overview-title"
};
const _hoisted_6 = {
  class: "row items-center q-gutter-sm"
};
const _hoisted_7 = {
  class: "text-h4 font-demi-bold text-primary"
};
const _hoisted_8 = {
  class: "full-width text-left text-body1"
};
const _hoisted_9 = {
  class: "row justify-end items-center"
};
const _hoisted_10 = {
  key: 0,
  class: "q-gutter-sm"
};
const _hoisted_11 = {
  key: 1,
  class: "q-gutter-sm"
};
const _hoisted_12 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "q-pl-xs"
}, "Save Changes", -1);
const _hoisted_13 = {
  class: "font-medium text-h5 q-py-sm"
};
const _hoisted_14 = ["onClick"];
const _hoisted_15 = {
  key: 0,
  class: "text-body2 text-primary-500"
};
const _hoisted_16 = {
  key: 1,
  class: "q-primary-question full-width q-pb-md"
};
const _hoisted_17 = {
  key: 0,
  class: "q-alternative-title full-width text-left q-pb-md"
};
const _hoisted_18 = {
  class: "text-body2 text-primary-500"
};
const _hoisted_19 = {
  key: 2,
  class: "q-alternative-question full-width q-pb-md"
};
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_q_icon = (0,vue_esm_bundler/* resolveComponent */.up)("q-icon");
  const _component_q_avatar = (0,vue_esm_bundler/* resolveComponent */.up)("q-avatar");
  const _component_q_breadcrumbs_el = (0,vue_esm_bundler/* resolveComponent */.up)("q-breadcrumbs-el");
  const _component_q_breadcrumbs = (0,vue_esm_bundler/* resolveComponent */.up)("q-breadcrumbs");
  const _component_q_spinner = (0,vue_esm_bundler/* resolveComponent */.up)("q-spinner");
  const _component_q_badge = (0,vue_esm_bundler/* resolveComponent */.up)("q-badge");
  const _component_q_card = (0,vue_esm_bundler/* resolveComponent */.up)("q-card");
  const _component_q_btn = (0,vue_esm_bundler/* resolveComponent */.up)("q-btn");
  const _component_q_skeleton = (0,vue_esm_bundler/* resolveComponent */.up)("q-skeleton");
  const _component_q_space = (0,vue_esm_bundler/* resolveComponent */.up)("q-space");
  const _component_tooltip_pro = (0,vue_esm_bundler/* resolveComponent */.up)("tooltip-pro");
  const _component_q_card_section = (0,vue_esm_bundler/* resolveComponent */.up)("q-card-section");
  const _component_DynamicAnswers = (0,vue_esm_bundler/* resolveComponent */.up)("DynamicAnswers");
  const _component_DynamicQuestions = (0,vue_esm_bundler/* resolveComponent */.up)("DynamicQuestions");
  const _component_q_splitter = (0,vue_esm_bundler/* resolveComponent */.up)("q-splitter");
  const _component_q_scroll_observer = (0,vue_esm_bundler/* resolveComponent */.up)("q-scroll-observer");
  const _component_image_lightbox = (0,vue_esm_bundler/* resolveComponent */.up)("image-lightbox");
  const _component_q_page = (0,vue_esm_bundler/* resolveComponent */.up)("q-page");
  const _directive_ripple = (0,vue_esm_bundler/* resolveDirective */.Q2)("ripple");
  return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_page, {
    class: "bg-white"
  }, {
    default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      flat: "",
      class: "container bg-trasnparent"
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
        flat: ""
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_1, [(0,vue_esm_bundler/* createElementVNode */._)("div", {
          class: "col-12 col-sm-auto",
          style: (0,vue_esm_bundler/* normalizeStyle */.j5)(`min-width: ${_ctx.splitterModel + 35}px;`)
        }, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_avatar, {
          square: "",
          color: "accent",
          size: "136px",
          class: "rounded",
          "text-color": "secondary font-medium"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_ctx.brandInfo.brand_name ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("span", _hoisted_3, (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.avatarNameAbbr(_ctx.brandInfo.brand_name)), 1)) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_icon, {
            key: 1,
            name: "icon-star-asterisk",
            size: "60px"
          }))]),
          _: 1
        })])], 4), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs, {
          "active-color": "primary-500",
          "separator-color": "primary-500",
          gutter: "xs"
        }, {
          separator: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            size: "xs",
            name: "icon-chevron-right",
            class: "q-py-xs"
          })]),
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs_el, {
            icon: "icon-home-line",
            class: "q-py-xs q-pr-sm cursor-pointer hover-text-secondary",
            to: "/"
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs_el, {
            label: "Brands",
            class: "q-py-xs q-px-sm rounded cursor-pointer hover-text-secondary text-primary-500 font-medium",
            to: "/brands"
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs_el, {
            label: "Brand Overview",
            class: "q-py-xs q-px-sm rounded cursor-pointer hover-text-secondary text-primary-500 font-medium",
            to: `/brands/${_ctx.brandId}`
          }, null, 8, ["to"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs_el, {
            label: "Task Overview",
            class: "text-secondary bg-accent q-py-xs q-px-sm rounded font-medium"
          })]),
          _: 1
        }), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_5, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_6, [!_ctx.taskInfo.title ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_spinner, {
          key: 0,
          color: "secondary",
          size: "sm",
          class: "q-mr-sm"
        })) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createElementVNode */._)("span", _hoisted_7, (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.taskInfo.title || 'Loading task...'), 1), _ctx.taskInfo.title ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_badge, {
          key: 1,
          class: "badge badge-blue cursor-pointer",
          onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push(`/brands/${_ctx.brandId}`))
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)((0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.brandInfo.brand_name), 1)]),
          _: 1
        })) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)])])])])]),
        _: 1
      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
        flat: ""
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_splitter, {
          modelValue: _ctx.splitterModel,
          "onUpdate:modelValue": _cache[5] || (_cache[5] = $event => _ctx.splitterModel = $event),
          unit: "px",
          id: "mainSplitter",
          ref: "mainSplitter",
          "separator-class": `no-pointer-events bg-transparent q-mx-md${_ctx.$q.screen.lt.sm ? ' hidden' : ''}`,
          "before-class": `sticky sticky-menu-top${_ctx.$q.screen.lt.sm ? ' hidden  ' : ''}`,
          "after-class": "overflow-view"
        }, {
          before: (0,vue_esm_bundler/* withCtx */.w5)(() => [_ctx.taskInfo.title ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_card, {
            key: 0,
            flat: "",
            class: "q-gutter-sm"
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(_ctx.allSections, (tab, i) => {
              return (0,vue_esm_bundler/* withDirectives */.wy)(((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_card, {
                flat: "",
                key: tab.key,
                class: (0,vue_esm_bundler/* normalizeClass */.C_)(["cursor-pointer rounded hover-text-secondary hover-bg-accent text-body1 font-medium", tab.key === _ctx.tabSectionId && _ctx.tabSectionIdScrolled === '' || _ctx.tabSectionIdScrolled === tab.key || _ctx.tabSectionIdScrolled === '' && _ctx.tabSectionId === '' && i === 0 ? 'bg-accent text-secondary' : 'text-primary-500']),
                onClick: $event => _ctx.clickScrollEvent(tab.key, false),
                "section-id": tab.key
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
                  flat: "",
                  "no-caps": "",
                  ripple: false,
                  class: "rounded hover-text-secondary hover-bg-accent font-medium button-md"
                }, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_8, (0,vue_esm_bundler/* toDisplayString */.zw)(tab.label), 1)]),
                  _: 2
                }, 1024)]),
                _: 2
              }, 1032, ["class", "onClick", "section-id"])), [[_directive_ripple, {
                color: 'secondary'
              }]]);
            }), 128))]),
            _: 1
          })) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
            key: 1
          }, (0,vue_esm_bundler/* renderList */.Ko)([1, 2, 3, 4], j => {
            return (0,vue_esm_bundler/* createElementVNode */._)("div", {
              key: j
            }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
              type: "QToolbar",
              class: "q-my-md",
              height: "2rem"
            })]);
          }), 64))]),
          after: (0,vue_esm_bundler/* withCtx */.w5)(() => [_ctx.taskInfo.title ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_card, {
            key: 0,
            flat: "",
            class: "text-body1 q-pb-xl"
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card_section, {
              class: "q-px-none q-pt-none q-pb-md font-medium text-h5"
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_9, [(0,vue_esm_bundler/* createTextVNode */.Uk)(" Task Overview "), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_space), !_ctx.editing ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_10, [_ctx.documentReady ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_btn, {
                key: 0,
                flat: "",
                round: "",
                size: "sm",
                icon: "icon-printer",
                class: "text-primary-500 hover-text-secondary",
                disable: !_ctx.documentReady || _ctx.convertingPDF,
                onClick: _cache[1] || (_cache[1] = $event => _ctx.exportToPDF(`TASK-${_ctx.taskInfo?.title}-${_ctx.brandInfo.brand_name}`, ['overview-title', ..._ctx.overviewIds]))
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_tooltip_pro, {
                  anchor: `${_ctx.$q.screen.lt.md ? 'center left' : 'bottom middle'}`,
                  self: `${_ctx.$q.screen.lt.md ? 'center right' : 'top middle'}`
                }, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)(" Export to PDF ")]),
                  _: 1
                }, 8, ["anchor", "self"])]),
                _: 1
              }, 8, ["disable"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
                flat: "",
                round: "",
                size: "sm",
                icon: "icon-edit-05",
                class: "text-primary-500 hover-text-secondary",
                disable: !_ctx.documentReady || _ctx.convertingPDF,
                onClick: _cache[2] || (_cache[2] = $event => _ctx.editing = true)
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_tooltip_pro, null, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Edit")]),
                  _: 1
                })]),
                _: 1
              }, 8, ["disable"])])) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_11, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
                "no-caps": "",
                outline: "",
                size: "sm",
                class: "rounded not-gm hover-negative",
                onClick: _cache[3] || (_cache[3] = (0,vue_esm_bundler/* withModifiers */.iM)($event => _ctx.editing = false, ["stop"]))
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)(" Cancel ")]),
                _: 1
              }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
                "no-caps": "",
                unelevated: "",
                size: "sm",
                color: "primary",
                class: "rounded not-gm hover-bg-secondary",
                onClick: _cache[4] || (_cache[4] = (0,vue_esm_bundler/* withModifiers */.iM)($event => _ctx.editing = false, ["stop"]))
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                  name: "icon-save-01",
                  size: "xs"
                }), _hoisted_12]),
                _: 1
              })]))])]),
              _: 1
            }), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(_ctx.visibleAnswers, (data, id, i) => {
              return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_card_section, {
                key: data,
                class: "q-px-none q-pt-none q-pb-lg",
                "q-id": i,
                "q-info": JSON.stringify(data),
                id: _ctx.overviewIds[i]
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", {
                  class: (0,vue_esm_bundler/* normalizeClass */.C_)(["q-primary-title full-width text-left", {
                    ['q-pb-md']: _ctx.editing
                  }])
                }, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_13, [(0,vue_esm_bundler/* createElementVNode */._)("span", {
                  class: "cursor-pointer",
                  onClick: () => _ctx.noTitleClick ? void 0 : _ctx.clickScrollEvent(_ctx.overviewIds[i])
                }, (0,vue_esm_bundler/* toDisplayString */.zw)(data.question?.title), 9, _hoisted_14)]), _ctx.editing ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_15, (0,vue_esm_bundler/* toDisplayString */.zw)(data.question?.question), 1)) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)], 2), !_ctx.editing ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_DynamicAnswers, {
                  key: 0,
                  qtype: data.question?.type,
                  aqtype: data.question?.alternative_type,
                  answer: data.value,
                  class: "q-primary-answer full-width q-pb-md"
                }, null, 8, ["qtype", "aqtype", "answer"])) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_16, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_DynamicQuestions, {
                  autofocus: false,
                  question: data.question,
                  initAnswer: _ctx.answer[data.question?.id],
                  platforms: _ctx.requestInfo.platforms,
                  onAnswered: ans => _ctx.answer[data.question?.id] = ans,
                  textareaRow: 15,
                  ref_for: true,
                  ref: data.question?.type.startsWith('upload_') ? `upload${data.question?.id}` : undefined,
                  fileRemovedFile: _ctx.uploads[`upload${data.question?.id}`]?.removedFile,
                  fileFactory: _ctx.factoryFnAutoUpload,
                  fileInitSlots: _ctx.uploads[`upload${data.question?.id}`],
                  fileThumbnail: "auto",
                  onChecked: val => _ctx.answer[data.question?.id].value.info = val,
                  checked: _ctx.answer[data.question?.id]?.value?.info,
                  onFileAdded: files => {
                    if (!_ctx.uploads[`upload${data.question?.id}`]?.files?.length || data.question?.type === 'website_content') {
                      _ctx.addUploadToModel('uploads', `upload${data.question?.id}`, files, `upload${data.question?.id}`);
                    } else if (!_ctx.uploads[`upload${data.question?.id}`]?.files?.length || data.question?.type === 'upload_multiple') {
                      _ctx.addUploadToModel('uploads', `upload${data.question?.id}`, files, `upload${data.question?.id}`);
                    } else {
                      _ctx.uploads[`upload${data.question?.id}`].files = files;
                    }
                  },
                  onFileUploaded: ({
                    files,
                    xhr
                  }) => {
                    const response = JSON.parse(xhr.response || '{}');
                    if (response.success) {
                      const data = response.data;
                      if (data.question?.type === 'website_content') {
                        _ctx.answer[data.question?.id].value.uploads = _ctx.answer[data.question?.id].value.uploads.concat(data.map(e => e.id));
                      } else if (data.question?.type === 'upload_multiple') {
                        _ctx.answer[data.question?.id].value = _ctx.answer[data.question?.id].value.concat(data.map(e => e.id));
                      } else {
                        _ctx.answer[data.question?.id].value = data[0]?.id;
                      }
                    }
                  },
                  onFileRemoved: files => {
                    if (data.question?.type === 'website_content') {
                      files.map(e => e.id).forEach(e => {
                        const ind = _ctx.answer[data.question?.id]?.value.uploads?.findIndex?.(a => a === e);
                        if (ind !== -1) {
                          _ctx.answer[data.question?.id].value.uploads.splice(ind, 1);
                        }
                      });
                    } else if (data.question?.type === 'upload_multiple') {
                      files.map(e => e.id).forEach(e => {
                        const ind = _ctx.answer[data.question?.id]?.value.uploads?.findIndex?.(a => a === e);
                        if (ind !== -1) {
                          _ctx.answer[data.question?.id].value.splice(ind, 1);
                        }
                      });
                    } else {
                      _ctx.answer[data.question?.id].value = '';
                    }
                  }
                }, null, 8, ["question", "initAnswer", "platforms", "onAnswered", "fileRemovedFile", "fileFactory", "fileInitSlots", "onChecked", "checked", "onFileAdded", "onFileUploaded", "onFileRemoved"])])), data.question?.alternative_if && (_ctx.answer[data.question?.id]?.value === data.question?.alternative_if || _ctx.answer[data.question?.id]?.value?.value === data.question?.alternative_if) ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
                  key: 2
                }, [data.question?.alternative_question && _ctx.editing ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_17, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_18, (0,vue_esm_bundler/* toDisplayString */.zw)(data.question?.alternative_question), 1)])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), !_ctx.editing ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_DynamicAnswers, {
                  key: 1,
                  qtype: data.question?.alternative_type,
                  answer: data.alternative_answer,
                  class: "q-alternative-answer full-width q-pb-md"
                }, null, 8, ["qtype", "answer"])) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_19, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_DynamicQuestions, {
                  autofocus: false,
                  question: {
                    id: data.question?.id,
                    type: data.question?.alternative_type,
                    required: data.question?.required,
                    options: data.question?.alternative_options,
                    placeholder: data.question?.alternative_placeholder
                  },
                  initAnswer: {
                    value: _ctx.answer[data.question?.id].alternative_answer
                  },
                  platforms: _ctx.requestInfo.platforms,
                  onAnswered: ans => _ctx.answer[data.question?.id].alternative_answer = ans?.value,
                  textareaRow: 15,
                  ref_for: true,
                  ref: data.question?.alternative_type.startsWith('upload_') ? `upload${data.question?.id}` : undefined,
                  fileRemovedFile: _ctx.uploads[`upload${data.question?.id}`]?.removedFile,
                  fileFactory: _ctx.factoryFnAutoUpload,
                  fileInitSlots: _ctx.uploads[`upload${data.question?.id}`],
                  fileThumbnail: "auto",
                  onChecked: val => _ctx.answer[data.question?.id].value.info = val,
                  checked: _ctx.answer[data.question?.id]?.value?.info,
                  onFileAdded: files => {
                    if (!_ctx.uploads[`upload${data.question?.id}`]?.files?.length || data.question?.alternative_type === 'website_content') {
                      _ctx.addUploadToModel('uploads', `upload${data.question?.id}`, files, `upload${data.question?.id}`);
                    } else if (!_ctx.uploads[`upload${data.question?.id}`]?.files?.length || data.question?.alternative_type === 'upload_multiple') {
                      _ctx.addUploadToModel('uploads', `upload${data.question?.id}`, files, `upload${data.question?.id}`);
                    } else {
                      _ctx.uploads[`upload${data.question?.id}`].files = files;
                    }
                  },
                  onFileUploaded: ({
                    files,
                    xhr
                  }) => {
                    const response = JSON.parse(xhr.response || '{}');
                    if (response.success) {
                      const data = response.data;
                      if (data.question?.alternative_type === 'website_content') {
                        _ctx.answer[data.question?.id].alternative_answer.uploads = _ctx.answer[data.question?.id].alternative_answer.uploads.concat(data.map(e => e.id));
                      } else if (data.question?.alternative_type === 'upload_multiple') {
                        _ctx.answer[data.question?.id].alternative_answer = _ctx.answer[data.question?.id].alternative_answer.concat(data.map(e => e.id));
                      } else {
                        _ctx.answer[data.question?.id].alternative_answer = data[0]?.id;
                      }
                    }
                  },
                  onFileRemoved: files => {
                    if (data.question?.alternative_type === 'website_content') {
                      files.map(e => e.id).forEach(e => {
                        const ind = _ctx.answer[data.question?.id]?.alternative_answer.uploads?.findIndex?.(a => a === e);
                        if (ind !== -1) {
                          _ctx.answer[data.question?.id].alternative_answer.uploads.splice(ind, 1);
                        }
                      });
                    } else if (data.question?.alternative_type === 'upload_multiple') {
                      files.map(e => e.id).forEach(e => {
                        const ind = _ctx.answer[data.question?.id]?.alternative_answer.uploads?.findIndex?.(a => a === e);
                        if (ind !== -1) {
                          _ctx.answer[data.question?.id].alternative_answer.uploads.splice(ind, 1);
                        }
                      });
                    } else {
                      _ctx.answer[data.question?.id].alternative_answer = '';
                    }
                  }
                }, null, 8, ["question", "initAnswer", "platforms", "onAnswered", "fileRemovedFile", "fileFactory", "fileInitSlots", "onChecked", "checked", "onFileAdded", "onFileUploaded", "onFileRemoved"])]))], 64)) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)]),
                _: 2
              }, 1032, ["q-id", "q-info", "id"]);
            }), 128))]),
            _: 1
          })) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
            key: 1
          }, (0,vue_esm_bundler/* renderList */.Ko)([1, 2, 3, 4], j => {
            return (0,vue_esm_bundler/* createElementVNode */._)("div", {
              key: j
            }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
              width: `${j % 2 == 0 ? 45 : 35}%`,
              type: "QToolbar",
              class: "q-my-md",
              height: "2rem"
            }, null, 8, ["width"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
              type: "QToolbar",
              width: "100%"
            })]);
          }), 64))]),
          _: 1
        }, 8, ["modelValue", "separator-class", "before-class"])]),
        _: 1
      })]),
      _: 1
    }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_scroll_observer, {
      onScroll: _ctx.scrollHandler
    }, null, 8, ["onScroll"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_image_lightbox, {
      visible: _ctx.showLightBox,
      imgs: _ctx.lightboxImages,
      index: _ctx.lightboxIndex,
      onHide: _cache[6] || (_cache[6] = $event => _ctx.showLightBox = false)
    }, null, 8, ["visible", "imgs", "index"])]),
    _: 1
  });
}
;// CONCATENATED MODULE: ./src/pages/Brands/TaskOverview.vue?vue&type=template&id=ea85c3da

// EXTERNAL MODULE: ./node_modules/pinia/dist/pinia.mjs + 1 modules
var pinia = __webpack_require__(11872);
// EXTERNAL MODULE: ./src/stores/growmodo/index.js + 3 modules
var growmodo = __webpack_require__(72393);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/copy-to-clipboard.js
var copy_to_clipboard = __webpack_require__(65054);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/debounce.js
var debounce = __webpack_require__(60899);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/format.js
var format = __webpack_require__(30321);
// EXTERNAL MODULE: ./src/assets/scripts/functions.js + 1 modules
var functions = __webpack_require__(1966);
// EXTERNAL MODULE: ./src/mixins/index.js + 7 modules
var mixins = __webpack_require__(93458);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/Brands/TaskOverview.vue?vue&type=script&lang=js






const {
    capitalize
  } = format["default"],
  getEl = id => {
    return document.getElementById(id);
  };

/* harmony default export */ const TaskOverviewvue_type_script_lang_js = ((0,vue_esm_bundler/* defineComponent */.aZ)({
  name: 'TaskOverview',
  mixins: [mixins/* RequestOptions_Mixin */.Tt, mixins/* FileUploader_Mixin */.GU, mixins/* Export_Task_Project_Mixin */.uZ, mixins/* Helpers_Mixin */.h2],
  components: {
    DynamicQuestions: (0,vue_esm_bundler/* defineAsyncComponent */.RC)(() => __webpack_require__.e(/* import() */ 435).then(__webpack_require__.bind(__webpack_require__, 99435))),
    DynamicAnswers: (0,vue_esm_bundler/* defineAsyncComponent */.RC)(() => Promise.all(/* import() */[__webpack_require__.e(736), __webpack_require__.e(402)]).then(__webpack_require__.bind(__webpack_require__, 15402)))
  },
  data() {
    return {
      title: 'Task Overview',
      showLightBox: false,
      lightboxIndex: 0,
      lightboxImages: [],
      tabSectionId: '',
      tabSectionIdScrolled: '',
      splitterModel: 175,
      editing: false,
      noTitleClick: false,
      documentReady: false,
      capitalize,
      avatarNameAbbr: functions.avatarNameAbbr,
      loomURLShare2Embed: functions.loomURLShare2Embed,
      scrollHandler: (0,debounce/* default */.Z)(this.scrollHandlerOrig, 100),
      taskInfo: {},
      clickScroll: false,
      answer: (0,vue_esm_bundler/* ref */.iH)({}),
      uploads: (0,vue_esm_bundler/* ref */.iH)({}),
      request_submitting: false,
      request_submitted: false,
      containerSideMenu: false
    };
  },
  async mounted() {
    this.$root.setMeta({
      title: this.title
    });
    const response = await this.getSingleTask(this.taskId);
    if (response?.success) this.taskInfo = response.data;
    this.tabSectionId = this.hashId;
    this.updateLightBox();
    this.$nextTick(() => {
      setTimeout(() => {
        this.documentReady = true;
      }, 1000);
    });
    this.updateAnswers();
  },
  computed: {
    ...(0,pinia/* mapState */.rn)(growmodo/* default */.Z, ['taskDirectory']),
    hashId() {
      return this.$route.hash.slice(1);
    },
    brandId() {
      return this.$route.params?.brandId;
    },
    taskId() {
      return this.$route.params?.taskId;
    },
    answers() {
      return this.taskInfo?.answers || {};
    },
    visibleAnswers() {
      const res = {};
      Object.values(this.answers).map(e => {
        if (e.question?.show_in_overview) {
          res[e.question?.id] = e;
        }
      });
      return res;
    },
    dynamicAnswers() {
      return Object.values(this.taskInfo?.answers || {});
    },
    overviewData() {
      return this.dynamicAnswers.filter(e => e.question?.show_in_overview);
    },
    overviewIds() {
      return this.overviewData.map(e => `question_${e.question?.id}`);
    },
    brandInfo() {
      return this.taskInfo.brand || {};
    },
    requestInfo() {
      return this.taskDirectory[this.taskInfo?.task_id] || {};
    },
    allSections() {
      return this.overviewData.map((e, i) => ({
        label: e.question?.title,
        key: this.overviewIds[i]
      }));
    }
  },
  watch: {
    editing: {
      async handler(val) {
        setTimeout(this.updateLightBox, 500);
        this.updateAnswers();
      }
    },
    tabSectionId: {
      async handler(val) {
        if (val) {
          this.scrollToTarget(val);
          this.tabSectionId = '';
        }
      }
    }
  },
  methods: {
    ...(0,pinia/* mapActions */.nv)(growmodo/* default */.Z, ['getSingleTask']),
    updateAnswers() {
      const answers = this.taskInfo?.answers || {};
      const formatedAnswers = {};
      for (const id of Object.keys(this.taskInfo?.answers)) {
        formatedAnswers[id] = {
          ...answers[id]
        };
        if (formatedAnswers[id]?.question) delete formatedAnswers[id]?.question;
      }
      this.answer = formatedAnswers;
    },
    updateLightBox() {
      this.lightboxImages = [];
      const lightboxElems = document.querySelectorAll('.with-lightbox');
      lightboxElems.forEach((e, i) => {
        let img = e.querySelector('img');
        this.lightboxImages.push({
          src: img.src,
          title: img.title,
          alt: img.alt
        });
        e.onclick = () => {
          this.lightboxIndex = i;
          this.showLightBox = true;
        };
      });
    },
    scrollToTarget(targetId) {
      getEl(targetId)?.scrollIntoView?.({
        block: 'start',
        inline: 'nearest',
        behavior: 'smooth'
      });
    },
    clickScrollEvent(targetId, copy = true) {
      this.clickScroll = true;
      this.tabSectionId = targetId;
      this.tabSectionIdScrolled = targetId;
      // Copy URL to Clipboard
      if (copy) {
        (0,copy_to_clipboard/* default */.Z)(window.location.origin + this.$route.fullPath + '#' + targetId);
        this.$q.notify({
          icon: 'icon-check-circle-broken',
          message: 'Anchor has been copied to clipboard.',
          timeout: 500
        });
      }
      setTimeout(() => {
        this.clickScroll = false;
      }, 1000);
    },
    scrollHandlerOrig(scroll) {
      if (this.clickScroll) return;
      this.tabSectionIdScrolled = '';
      let selectedKey = '';
      this.allSections.map(e => e.key).forEach(key => {
        const el = getEl(key),
          offsetTop = el?.getBoundingClientRect()?.top;
        const top = scroll?.position?.top;
        if (offsetTop < 50) selectedKey = key;
      });
      this.tabSectionIdScrolled = selectedKey;
    }
  }
}));
;// CONCATENATED MODULE: ./src/pages/Brands/TaskOverview.vue?vue&type=script&lang=js
 
// EXTERNAL MODULE: ./node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(11639);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js
var QPage = __webpack_require__(69885);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js
var QCard = __webpack_require__(44458);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/avatar/QAvatar.js
var QAvatar = __webpack_require__(61357);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js
var QIcon = __webpack_require__(22857);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/breadcrumbs/QBreadcrumbs.js
var QBreadcrumbs = __webpack_require__(72605);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/breadcrumbs/QBreadcrumbsEl.js
var QBreadcrumbsEl = __webpack_require__(28052);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/spinner/QSpinner.js
var QSpinner = __webpack_require__(13902);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/badge/QBadge.js
var QBadge = __webpack_require__(20990);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/splitter/QSplitter.js
var QSplitter = __webpack_require__(7498);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js
var QBtn = __webpack_require__(68879);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/skeleton/QSkeleton.js
var QSkeleton = __webpack_require__(57133);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js
var QCardSection = __webpack_require__(63190);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/space/QSpace.js
var QSpace = __webpack_require__(90136);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/scroll-observer/QScrollObserver.js
var QScrollObserver = __webpack_require__(71868);
// EXTERNAL MODULE: ./node_modules/quasar/src/directives/Ripple.js
var Ripple = __webpack_require__(51722);
// EXTERNAL MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js
var runtime_auto_import = __webpack_require__(69984);
var runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);
;// CONCATENATED MODULE: ./src/pages/Brands/TaskOverview.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(TaskOverviewvue_type_script_lang_js, [['render',render]])

/* harmony default export */ const TaskOverview = (__exports__);
;














runtime_auto_import_default()(TaskOverviewvue_type_script_lang_js, 'components', {QPage: QPage/* default */.Z,QCard: QCard/* default */.Z,QAvatar: QAvatar/* default */.Z,QIcon: QIcon/* default */.Z,QBreadcrumbs: QBreadcrumbs/* default */.Z,QBreadcrumbsEl: QBreadcrumbsEl/* default */.Z,QSpinner: QSpinner/* default */.Z,QBadge: QBadge/* default */.Z,QSplitter: QSplitter/* default */.Z,QBtn: QBtn/* default */.Z,QSkeleton: QSkeleton/* default */.ZP,QCardSection: QCardSection/* default */.Z,QSpace: QSpace/* default */.Z,QScrollObserver: QScrollObserver/* default */.Z});runtime_auto_import_default()(TaskOverviewvue_type_script_lang_js, 'directives', {Ripple: Ripple/* default */.Z});


/***/ })

}]);
//# sourceMappingURL=550.e2cf18e2.js.map