"use strict";(globalThis["webpackChunkgrowmodo_hub"]=globalThis["webpackChunkgrowmodo_hub"]||[]).push([[300],{300:(e,o,n)=>{n.r(o),n.d(o,{default:()=>L});var t=n(9835);function s(e,o,n,s,i,a){const r=(0,t.up)("AuthorizationForm"),l=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(l,{class:"flex flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{onSuccess:e.onLoginResponse,onFailed:e.onLoginResponse},null,8,["onSuccess","onFailed"])])),_:1})}const i=(0,t.Uk)(" Authentication "),a={class:"row"},r=(0,t.Uk)(" Login "),l=(0,t.Uk)(" Verifying ");function u(e,o,n,s,u,c){const d=(0,t.up)("q-icon"),p=(0,t.up)("q-toolbar-title"),m=(0,t.up)("q-toolbar"),g=(0,t.up)("q-input"),h=(0,t.up)("InputPassword"),w=(0,t.up)("q-space"),_=(0,t.up)("q-spinner"),y=(0,t.up)("q-btn"),f=(0,t.up)("q-form"),b=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(b,{style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{size:"lg",color:"primary",name:"img:favicon.png"}),(0,t.Wm)(p,{class:"text-body1 font-medium"},{default:(0,t.w5)((()=>[i])),_:1})])),_:1}),(0,t.Wm)(f,{onSubmit:e.loginWithPwd,ref:"authorization_form",class:"q-pa-md q-gutter-xs"},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{rounded:"",outlined:"",autofocus:"",clearable:"","lazy-rules":"",autocomplete:"","clear-icon":"icon-x-close",label:"Username or Userid",modelValue:e.u_useridentity,"onUpdate:modelValue":o[0]||(o[0]=o=>e.u_useridentity=o),rules:[o=>e.checker.input(!!o||"",250)]},{prepend:(0,t.w5)((()=>[(0,t.Wm)(d,{size:"xs",name:"icon-user-03"})])),_:1},8,["modelValue","rules"])]),(0,t._)("div",null,[(0,t.Wm)(h,{withicon:"",rounded:"",outlined:"",clearable:"","lazy-rules":"",autocomplete:"",dense:!1,label:"Password","clear-icon":"icon-x-close",modelValue:e.u_password,"onUpdate:modelValue":o[1]||(o[1]=o=>e.u_password=o),rules:[o=>e.checker.input(!!o||"",250)]},null,8,["modelValue","rules"])]),(0,t._)("div",a,[(0,t.Wm)(w),(0,t.Wm)(y,{ripple:"","no-caps":"",rounded:"",size:"16px",unelevated:"",color:"primary",class:"text-body2 font-medium q-px-xl",percentage:e.decrypting.percentage,onClick:e.submitValidation},{loading:(0,t.w5)((()=>[e.decrypting.status?((0,t.wg)(),(0,t.j4)(_,{key:0,size:"xs",class:"on-left"})):(0,t.kq)("",!0),l])),default:(0,t.w5)((()=>[r])),_:1},8,["percentage","onClick"])])])),_:1},8,["onSubmit"])])),_:1})}var c=n(4877),d=n(8201),p=n(1809),m=n(7838);const g=(0,t.aZ)({name:"AuthorizationForm",data(){return{checker:c.ZZ,loginAnimate:null,u_useridentity:null,u_password:null,interval:null,login_response:null,decrypting:{status:!1,percentage:0}}},watch:{login_response:{async handler(e){},deep:!0}},emits:["success","failed","loading"],methods:{...(0,p.nv)(m.Z,["loginWithPassword"]),submitValidation(){const e=this.$refs.authorization_form;e&&e.submit()},async loginWithPwd(){var e;this.loginLoading(),this.login_response=null;const o={username:this.u_useridentity,password:this.u_password};this.$emit("loading",o),console.log("Trying API",o);const n=await this.loginWithPassword(o);this.login_response=n||{},console.log(this.login_response),this.$emit(null!==(e=this.login_response)&&void 0!==e&&e.success?"success":"failed",this.login_response||{})},async loginLoading(e){this.decrypting.status=!0,this.loginAnimate=setInterval((()=>{this.decrypting.percentage+=Math.floor(8*Math.random()+10),this.decrypting.percentage>=100&&(e&&e(),this.decrypting.status=!1)}),1e3)}},components:{InputPassword:d.Z}});var h=n(1639),w=n(9892),_=n(1663),y=n(2857),f=n(1973),b=n(8326),Z=n(6611),v=n(136),x=n(4455),q=n(3902),k=n(9984),W=n.n(k);const z=(0,h.Z)(g,[["render",u]]),P=z;W()(g,"components",{QCard:w.Z,QToolbar:_.Z,QIcon:y.Z,QToolbarTitle:f.Z,QForm:b.Z,QInput:Z.Z,QSpace:v.Z,QBtn:x.Z,QSpinner:q.Z});const Q=(0,t.aZ)({name:"AuthorizationPage",data(){return{title:"Authorization"}},components:{AuthorizationForm:P},async mounted(){this.$root.setMeta({title:this.title})},methods:{onLoginResponse(e){console.log(e),null!==e&&void 0!==e&&e.success&&this.redirectOnLogin()},redirectOnLogin(){this.$router.push(this.$route.query.redirect||"/")}}});var A=n(9885);const V=(0,h.Z)(Q,[["render",s]]),L=V;W()(Q,"components",{QPage:A.Z})}}]);