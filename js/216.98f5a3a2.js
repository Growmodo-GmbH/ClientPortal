"use strict";
(globalThis["webpackChunkgrowmodo_hub"] = globalThis["webpackChunkgrowmodo_hub"] || []).push([[216],{

/***/ 61216:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ FilesPage)
});

// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm-bundler.js + 6 modules
var vue_esm_bundler = __webpack_require__(56646);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/FilesPage.vue?vue&type=template&id=09e70bdb

const _hoisted_1 = {
  class: "font-medium text-h5"
};
const _hoisted_2 = {
  class: "rounded q-my-lg"
};
const _hoisted_3 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("div", {
  class: "text-body2 font-normal color-primary2 q-pt-xs"
}, " Files and assets that have been attached to this project. ", -1);
const _hoisted_4 = {
  class: "col-12 col-md-6"
};
const _hoisted_5 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body2 font-medium"
}, "View All", -1);
const _hoisted_6 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body2 font-medium"
}, "Your Files", -1);
const _hoisted_7 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body2 font-medium"
}, "Shared Files", -1);
const _hoisted_8 = {
  class: "col-12 col-md-6"
};
const _hoisted_9 = {
  class: "row q-col-gutter-md items-center justify-end text-right"
};
const _hoisted_10 = {
  class: "col-12 col-sm-6 col-md-auto"
};
const _hoisted_11 = {
  class: "col-12 col-sm-6 col-md-auto"
};
const _hoisted_12 = {
  class: "text-body2 font-medium color-primary2"
};
const _hoisted_13 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body2 font-medium text-transparent"
}, " Options ", -1);
const _hoisted_14 = {
  class: "q-gutter-sm text-right"
};
const _hoisted_15 = {
  key: 0,
  class: "q-py-md row full-width items-center justify-center q-col-gutter-sm q-virtual-scroll--skip"
};
const _hoisted_16 = {
  class: "q-py-md row full-width items-center justify-between q-col-gutter-sm q-virtual-scroll--skip"
};
const _hoisted_17 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "q-pl-sm"
}, "Previous", -1);
const _hoisted_18 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "q-pr-sm"
}, "Next", -1);
const _hoisted_19 = {
  class: "q-py-md full-width row flex-center color-primary2 q-gutter-sm"
};
const _hoisted_20 = {
  class: "text-body2 color-primary2 font-medium"
};
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_q_toolbar_title = (0,vue_esm_bundler/* resolveComponent */.up)("q-toolbar-title");
  const _component_q_toolbar = (0,vue_esm_bundler/* resolveComponent */.up)("q-toolbar");
  const _component_q_card = (0,vue_esm_bundler/* resolveComponent */.up)("q-card");
  const _component_FileUploader = (0,vue_esm_bundler/* resolveComponent */.up)("FileUploader");
  const _component_q_card_section = (0,vue_esm_bundler/* resolveComponent */.up)("q-card-section");
  const _component_q_separator = (0,vue_esm_bundler/* resolveComponent */.up)("q-separator");
  const _component_q_btn = (0,vue_esm_bundler/* resolveComponent */.up)("q-btn");
  const _component_q_btn_group = (0,vue_esm_bundler/* resolveComponent */.up)("q-btn-group");
  const _component_q_icon = (0,vue_esm_bundler/* resolveComponent */.up)("q-icon");
  const _component_q_input = (0,vue_esm_bundler/* resolveComponent */.up)("q-input");
  const _component_q_item_label = (0,vue_esm_bundler/* resolveComponent */.up)("q-item-label");
  const _component_q_item_section = (0,vue_esm_bundler/* resolveComponent */.up)("q-item-section");
  const _component_q_item = (0,vue_esm_bundler/* resolveComponent */.up)("q-item");
  const _component_q_select = (0,vue_esm_bundler/* resolveComponent */.up)("q-select");
  const _component_q_linear_progress = (0,vue_esm_bundler/* resolveComponent */.up)("q-linear-progress");
  const _component_q_th = (0,vue_esm_bundler/* resolveComponent */.up)("q-th");
  const _component_q_tr = (0,vue_esm_bundler/* resolveComponent */.up)("q-tr");
  const _component_q_td = (0,vue_esm_bundler/* resolveComponent */.up)("q-td");
  const _component_CardIconBox = (0,vue_esm_bundler/* resolveComponent */.up)("CardIconBox");
  const _component_q_pagination = (0,vue_esm_bundler/* resolveComponent */.up)("q-pagination");
  const _component_q_table = (0,vue_esm_bundler/* resolveComponent */.up)("q-table");
  const _component_q_page = (0,vue_esm_bundler/* resolveComponent */.up)("q-page");
  return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_page, {
    padding: "",
    class: "container"
  }, {
    default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      flat: "",
      bordered: "",
      class: (0,vue_esm_bundler/* normalizeClass */.C_)(["rounded", _ctx.$q.screen.gt.sm ? 'q-px-lg q-py-sm' : 'q-pa-md'])
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar, {
        class: "q-pa-none"
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar_title, null, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_1, (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.title), 1)]),
          _: 1
        })]),
        _: 1
      })]),
      _: 1
    }, 8, ["class"]), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_FileUploader, {
      multiple: "",
      ref: "filesUploader",
      removedFile: _ctx.removedFile,
      filter: _ctx.filesChecker,
      onRejected: _ctx.onRejected,
      onAdded: _ctx.filesAddedQued,
      "max-file-size": "5000000"
    }, null, 8, ["removedFile", "filter", "onRejected", "onAdded"])]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      flat: "",
      bordered: ""
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card_section, {
        class: (0,vue_esm_bundler/* normalizeClass */.C_)(_ctx.$q.screen.gt.sm ? 'q-px-lg q-py-lg' : 'q-pa-md')
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar, {
          class: "text-primary q-pa-none"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar_title, {
            class: "text-h6 font-medium"
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)(" Attached files "), _hoisted_3]),
            _: 1
          })]),
          _: 1
        })]),
        _: 1
      }, 8, ["class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card_section, {
        class: (0,vue_esm_bundler/* normalizeClass */.C_)([_ctx.$q.screen.gt.sm ? 'q-px-lg' : 'q-px-md', "row q-col-gutter-md items-center justify-between q-py-md"])
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn_group, {
          spread: _ctx.$q.screen.sm || _ctx.$q.screen.lt.md,
          class: "rounded no-shadow border-add"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === '' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === '' ? 'secondary' : 'primary',
            onClick: _cache[0] || (_cache[0] = $event => _ctx.ownerFilter = '')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_5]),
            _: 1
          }, 8, ["color", "class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator, {
            vertical: ""
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === 'me' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === 'me' ? 'secondary' : 'primary',
            onClick: _cache[1] || (_cache[1] = $event => _ctx.ownerFilter = 'me')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_6]),
            _: 1
          }, 8, ["color", "class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator, {
            vertical: ""
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === 'others' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === 'others' ? 'secondary' : 'primary',
            onClick: _cache[2] || (_cache[2] = $event => _ctx.ownerFilter = 'others')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_7]),
            _: 1
          }, 8, ["color", "class"])]),
          _: 1
        }, 8, ["spread"])]), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_8, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_9, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_10, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          modelValue: _ctx.searchQuery,
          "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => _ctx.searchQuery = $event),
          dense: "",
          outlined: "",
          clearable: "",
          debounce: "500",
          class: "small-field",
          "input-class": "text-body1 font-medium text-primary",
          placeholder: "Search for files",
          "clear-icon": "icon-x-close"
        }, {
          prepend: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            name: "icon-search-sm",
            class: "hover-text-secondary"
          })]),
          _: 1
        }, 8, ["modelValue"])]), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_11, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_select, {
          dense: "",
          multiple: "",
          outlined: "",
          "emit-value": "",
          "map-options": "",
          color: "primary",
          "hide-dropdown-icon": "",
          options: _ctx.columns,
          "options-dense": false,
          "options-cover": true,
          modelValue: _ctx.visibleColumns,
          "onUpdate:modelValue": _cache[4] || (_cache[4] = $event => _ctx.visibleColumns = $event),
          "display-value": "Filters",
          "option-value": (val, row) => val ? val.name : null,
          class: "small-field hover-text-secondary table-select-filter",
          "popup-content-class": "shadow-ui",
          "transition-show": "jump-up",
          "transition-hide": "jump-down",
          style: {
            "min-width": "100px"
          }
        }, {
          prepend: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            name: "icon-filter-lines",
            size: "sm",
            color: "primary",
            class: "hover-text-secondary"
          })]),
          option: (0,vue_esm_bundler/* withCtx */.w5)(scope => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item, (0,vue_esm_bundler/* mergeProps */.dG)(scope.itemProps, {
            disable: scope.opt.required,
            class: "hover-bg-accent"
          }), {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_label, {
                class: (0,vue_esm_bundler/* normalizeClass */.C_)(scope.opt.required || scope.selected ? 'text-secondary' : '')
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)((0,vue_esm_bundler/* toDisplayString */.zw)(scope.opt.label), 1)]),
                _: 2
              }, 1032, ["class"])]),
              _: 2
            }, 1024)]),
            _: 2
          }, 1040, ["disable"])]),
          _: 1
        }, 8, ["options", "modelValue", "option-value"])])])])]),
        _: 1
      }, 8, ["class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_table, {
        "row-key": "id",
        filteredSortedRows: "",
        "binary-state-sort": "",
        rows: _ctx.orgFiles,
        columns: _ctx.columns,
        color: "primary",
        dense: _ctx.tableDense,
        loading: _ctx.tableLoading,
        "rows-per-page-label": "Files per page",
        "no-results-label": "The filter didn't uncover any results.",
        "no-data-label": "I didn't find anything for you.",
        "loading-label": "Getting data from the server.",
        "rows-per-page-options": [10, 20, 30, 50, 50, 0],
        style: {
          "max-height": "950px"
        },
        selection: "multiple",
        pagination: _ctx.pagination,
        "onUpdate:pagination": _cache[7] || (_cache[7] = $event => _ctx.pagination = $event),
        selected: _ctx.selectedFiles,
        "onUpdate:selected": _cache[8] || (_cache[8] = $event => _ctx.selectedFiles = $event),
        "visible-columns": _ctx.visibleColumns,
        onRequest: _ctx.onRequest
      }, {
        loading: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", {
          class: "bg-color absolute-top",
          style: (0,vue_esm_bundler/* normalizeStyle */.j5)(`top: ${_ctx.tableDense ? '50px' : '56px'}`)
        }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_linear_progress, {
          size: "2px",
          indeterminate: "",
          color: "secondary"
        })], 4)]),
        header: (0,vue_esm_bundler/* withCtx */.w5)(scope => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_tr, {
          class: "bg-color"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_th, {
            "auto-width": "",
            style: {
              "position": "sticky",
              "top": "0",
              "z-index": "2",
              "padding-right": "0"
            },
            class: "cursor-pointer hover-text-secondary text-left",
            onClick: (0,vue_esm_bundler/* withModifiers */.iM)($event => scope.selected = !scope.selected, ["stop"])
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "md",
              icon: scope.selected ? 'icon-check-square' : 'icon-square',
              color: scope.selected || _ctx.selectedFiles.length ? 'secondary' : 'grey-5'
            }, null, 8, ["icon", "color"])]),
            _: 2
          }, 1032, ["onClick"]), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(scope.cols, (col, i) => {
            return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_th, {
              key: col.name,
              props: scope,
              "auto-width": i !== 0,
              style: (0,vue_esm_bundler/* normalizeStyle */.j5)([{
                "position": "sticky",
                "top": "0",
                "z-index": "2"
              }, i === 0 ? 'padding-left: 0' : ''])
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("span", _hoisted_12, (0,vue_esm_bundler/* toDisplayString */.zw)(col.label), 1)]),
              _: 2
            }, 1032, ["props", "auto-width", "style"]);
          }), 128)), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_th, {
            "auto-width": "",
            class: "text-right",
            style: {
              "position": "sticky",
              "top": "0",
              "z-index": "1"
            }
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_13]),
            _: 1
          })]),
          _: 2
        }, 1024)]),
        body: (0,vue_esm_bundler/* withCtx */.w5)(scope => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_tr, {
          props: scope,
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-bg-accent", scope.selected ? 'bg-accent' : 'bg-transparent'])
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, {
            class: (0,vue_esm_bundler/* normalizeClass */.C_)([scope.selected ? 'bg-accent' : 'bg-transparent', "cursor-pointer text-primary text-left hover-text-secondary"]),
            style: {
              "padding-right": "0"
            },
            onClick: (0,vue_esm_bundler/* withModifiers */.iM)($event => scope.selected = !scope.selected, ["stop"])
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "md",
              icon: scope.selected ? 'icon-check-square' : 'icon-square',
              color: scope.selected ? 'secondary' : 'grey-5'
            }, null, 8, ["icon", "color"])]),
            _: 2
          }, 1032, ["class", "onClick"]), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(scope.cols, (_r, i) => {
            return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_td, {
              key: _r.name || i,
              props: scope,
              class: (0,vue_esm_bundler/* normalizeClass */.C_)([scope.selected ? 'bg-accent' : 'bg-transparent', "cursor-pointer text-primary"]),
              style: (0,vue_esm_bundler/* normalizeStyle */.j5)(i === 0 ? 'padding-left: 0' : '')
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [i === 0 ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                key: 0,
                class: "text-body2 q-pa-none"
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                  avatar: "",
                  style: {
                    "min-width": "unset"
                  },
                  class: "q-pr-sm"
                }, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_CardIconBox, {
                    icon: `icon-${scope.row?.folder ? 'folder' : 'image-03'}`
                  }, null, 8, ["icon"])]),
                  _: 2
                }, 1024), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("span", {
                    class: (0,vue_esm_bundler/* normalizeClass */.C_)(i === 0 ? 'font-medium' : '')
                  }, (0,vue_esm_bundler/* toDisplayString */.zw)(_r.value), 3)]),
                  _: 2
                }, 1024)]),
                _: 2
              }, 1024)) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("span", {
                key: 1,
                class: (0,vue_esm_bundler/* normalizeClass */.C_)(["text-body2 color-primary2", i === 0 ? 'font-medium' : ''])
              }, (0,vue_esm_bundler/* toDisplayString */.zw)(_r.value), 3))]),
              _: 2
            }, 1032, ["props", "class", "style"]);
          }), 128)), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, {
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(scope.selected ? 'bg-accent' : 'bg-transparent'),
            style: {
              "padding-right": "24px",
              "padding-top": "18px",
              "padding-bottom": "18px"
            }
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_14, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "12px",
              color: "grey-7",
              icon: "icon-trash-01",
              class: "hover-text-negative hover-bg-accent",
              disable: _ctx.tableLoading,
              onClick: $event => _ctx.deleteOrgFilesLocally(scope?.row)
            }, null, 8, ["disable", "onClick"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "12px",
              color: "grey-7",
              icon: "icon-edit-01",
              class: "hover-text-secondary hover-bg-accent",
              disable: _ctx.tableLoading
            }, null, 8, ["disable"])])]),
            _: 2
          }, 1032, ["class"])]),
          _: 2
        }, 1032, ["props", "class"])]),
        bottom: (0,vue_esm_bundler/* withCtx */.w5)(scope => [_ctx.$q.screen.lt.xs || _ctx.$q.screen.xs ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_15, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_pagination, {
          unelevated: "",
          "boundary-numbers": "",
          modelValue: _ctx.pagination.page,
          "onUpdate:modelValue": _cache[5] || (_cache[5] = $event => _ctx.pagination.page = $event),
          disable: _ctx.tableLoading,
          color: "text-grey-6",
          class: "color-primary2 rounded",
          "active-color": "grey-2",
          "active-text-color": "primary",
          max: scope.pagesNumber,
          "max-pages": 6
        }, null, 8, ["modelValue", "disable", "max"])])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_16, [(0,vue_esm_bundler/* createElementVNode */._)("div", {
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["text-left", _ctx.$q.screen.gt.xs ? 'col-2' : 'col-6'])
        }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
          dense: "",
          outline: "",
          "no-caps": "",
          disable: scope.isFirstPage,
          onClick: scope.prevPage,
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["rounded q-px-md slide-hover", scope.isFirstPage ? 'color-primary2' : 'text-primary hover-text-secondary'])
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            size: "xs",
            name: "icon-arrow-narrow-left",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(!scope.isFirstPage ? 'slide-hover-right-md' : '')
          }, null, 8, ["class"]), _hoisted_17]),
          _: 2
        }, 1032, ["disable", "onClick", "class"])], 2), _ctx.$q.screen.gt.xs ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_pagination, {
          key: 0,
          unelevated: "",
          "boundary-numbers": "",
          modelValue: _ctx.pagination.page,
          "onUpdate:modelValue": _cache[6] || (_cache[6] = $event => _ctx.pagination.page = $event),
          disable: _ctx.tableLoading,
          color: "text-grey-6",
          class: "color-primary2 rounded",
          "active-color": "grey-2",
          "active-text-color": "primary",
          max: scope.pagesNumber,
          "max-pages": 6
        }, null, 8, ["modelValue", "disable", "max"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createElementVNode */._)("div", {
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["text-right", _ctx.$q.screen.gt.xs ? 'col-2' : 'col-6'])
        }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
          dense: "",
          outline: "",
          "no-caps": "",
          disable: scope.isLastPage,
          onClick: scope.nextPage,
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["rounded q-px-md slide-hover", scope.isLastPage ? 'color-primary2' : 'text-primary hover-text-secondary'])
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_18, (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            size: "xs",
            name: "icon-arrow-narrow-right",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(!scope.isLastPage ? 'slide-hover-left-md' : '')
          }, null, 8, ["class"])]),
          _: 2
        }, 1032, ["disable", "onClick", "class"])], 2)])]),
        "no-data": (0,vue_esm_bundler/* withCtx */.w5)(({
          icon,
          message,
          filter
        }) => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_19, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
          size: "sm",
          color: _ctx.tableLoading ? 'secondary' : 'negative',
          name: _ctx.tableLoading ? 'icon-download-cloud-01' : filter ? 'icon-filter-funnel-01' : icon
        }, null, 8, ["color", "name"]), (0,vue_esm_bundler/* createElementVNode */._)("span", _hoisted_20, (0,vue_esm_bundler/* toDisplayString */.zw)(message), 1)])]),
        _: 1
      }, 8, ["rows", "columns", "dense", "loading", "pagination", "selected", "visible-columns", "onRequest"])]),
      _: 1
    })]),
    _: 1
  });
}
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue?vue&type=template&id=09e70bdb

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(46727);
// EXTERNAL MODULE: ./src/components/Helpers/CardIconBox.vue + 4 modules
var CardIconBox = __webpack_require__(65724);
// EXTERNAL MODULE: ./node_modules/pinia/dist/pinia.mjs + 1 modules
var pinia = __webpack_require__(11872);
// EXTERNAL MODULE: ./src/stores/user/index.js + 3 modules
var user = __webpack_require__(33701);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/date.js
var date = __webpack_require__(54170);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/debounce.js
var debounce = __webpack_require__(60899);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/format.js
var format = __webpack_require__(30321);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/uid.js
var uid = __webpack_require__(50796);
// EXTERNAL MODULE: ./src/assets/scripts/functions.js + 1 modules
var functions = __webpack_require__(1966);
// EXTERNAL MODULE: ./src/components/Helpers/FilesUploader.vue + 4 modules
var FilesUploader = __webpack_require__(6583);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/FilesPage.vue?vue&type=script&lang=js








const {
  humanStorageSize
} = format/* default */.ZP;
/* harmony default export */ const FilesPagevue_type_script_lang_js = ((0,vue_esm_bundler/* defineComponent */.aZ)({
  name: 'FilesPage',
  components: {
    CardIconBox: CardIconBox/* default */.Z,
    FileUploader: FilesUploader/* default */.Z
  },
  data() {
    return {
      title: 'Files and Assets',
      searchQuery: '',
      ownerFilter: '',
      tableLoading: false,
      removedFile: null,
      tableDense: true,
      selectedFiles: [],
      visibleColumns: [],
      onRequestDelayed: null,
      orgFiles: [],
      pagination: {
        descending: true,
        page: 1,
        rowsPerPage: 10,
        rowsNumber: 0
      },
      columns: [{
        name: 'filename',
        required: true,
        label: 'Filename',
        align: 'left',
        field: row => row.filename,
        format: val => `${val}`,
        sortable: true
      }, {
        name: 'id',
        label: 'ID',
        align: 'left',
        field: row => row.id,
        format: val => `${val}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'filesize',
        label: 'File size',
        align: 'left',
        field: row => row.filesize,
        format: val => `${humanStorageSize(val)}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'date_uploaded',
        label: 'Date uploaded',
        align: 'left',
        field: row => row.date_uploaded,
        format: val => `${date/* default.formatDate */.ZP.formatDate(val, 'MMM D, YYYY')}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'last_updated',
        label: 'Last updated',
        align: 'left',
        field: row => row.last_updated,
        format: val => `${date/* default.formatDate */.ZP.formatDate(val, 'MMM D, YYYY')}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'uploaded_by',
        label: 'Uploaded by',
        align: 'left',
        field: row => row?.uploaded_by,
        format: val => `${this.selectedOrgUsers?.[val]?.firstname} ${this.selectedOrgUsers?.[val]?.lastname}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }]
    };
  },
  async mounted() {
    this.$root.setMeta({
      title: this.title
    });
    this.visibleColumns = this.columns.map(c => c.name) // Get all the column names
    .filter(e => !['id'].includes(e)); // Hide some columns initially

    this.onRequestDelayed = (0,debounce/* default */.Z)(this.onRequest, 1000);
    this.onRequest({
      pagination: this.pagination,
      filter: this.filter
    });
  },
  computed: {
    ...(0,pinia/* mapState */.rn)(user/* default */.Z, ['user', 'selectedOrgFiles', 'selectedOrgUsers']),
    orgFilesOriginal() {
      return Object.values(this.selectedOrgFiles);
    }
  },
  watch: {
    searchQuery: {
      async handler(val) {
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: val,
            owner: this.ownerFilter
          }
        }, 1000);
      }
    },
    ownerFilter: {
      async handler(val) {
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: this.searchQuery,
            owner: this.ownerFilter
          }
        }, 1000);
      }
    },
    orgFilesOriginal: {
      async handler(val) {
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: this.searchQuery,
            owner: this.ownerFilter
          }
        }, 1000);
      },
      deep: true
    },
    pagination: {
      async handler(val) {
        this.onRequest({
          pagination: val,
          filter: {
            search: this.searchQuery,
            owner: this.ownerFilter
          }
        }, 1000);
      },
      deep: true
    }
  },
  methods: {
    ...(0,pinia/* mapActions */.nv)(user/* default */.Z, ['deleteOrgFiles', 'addOrgFiles']),
    deleteOrgFilesLocally(file) {
      if (file?.file) {
        this.removedFile = file?.file;
        this.$refs?.['filesUploader']?.removeFile?.(file?.file);
      }
      this.$q.notify({
        spinner: true,
        message: `Removing ${file.filename}.`,
        spinnerColor: 'negative',
        timeout: 1500
      });
      this.deleteOrgFiles(file.id);
    },
    filesChecker(files, fileTypes = ['image/svg+xml', 'image/png', 'image/jpeg', 'image/gif']) {
      return files.filter(file => {
        let toUp = fileTypes.includes(file.type);
        return toUp;
      });
    },
    onRejected(rejectedEntries) {
      let duplicateFiles = rejectedEntries?.filter(file => file.failedPropValidation === 'duplicate');
      let duplicateFilesCount = duplicateFiles.length;
      let nonDuplicateFiles = rejectedEntries.length - duplicateFilesCount;
      let message = `${rejectedEntries.length} file${rejectedEntries.length > 1 ? 's' : ''} did not pass validation constraints`;
      switch (true) {
        case duplicateFilesCount == rejectedEntries.length:
          message = `File${duplicateFilesCount > 1 ? 's' : ''} already exist.`;
          break;
        case duplicateFilesCount > 0:
          message = `${duplicateFilesCount} duplicate file${duplicateFilesCount > 1 ? 's' : ''} and ${nonDuplicateFiles} file${nonDuplicateFiles > 1 ? 's' : ''} did not pass validation constraints.`;
          break;
        default:
          break;
      }
      this.$q.notify({
        message,
        iconColor: 'negative',
        icon: 'icon-alert-triangle'
      });
    },
    filesAddedQued(files) {
      files.forEach(file => {
        let file_id = (0,uid/* default */.Z)();
        let date_uploaded = new Date();
        this.addOrgFiles(file_id, {
          id: file_id,
          uid: file_id,
          filename: file.name,
          folder: false,
          filesize: file.size,
          date_uploaded: date_uploaded,
          last_updated: date_uploaded,
          uploaded_by: this.user?.id,
          file: file
        });
        if (files.length === 1)
          // Notify filename for single upload
          this.$q.notify({
            spinner: true,
            message: `Uploading ${file.name}.`,
            timeout: 1500
          });
      });
      // Notify total upload for multi upload
      if (files.length > 1) this.$q.notify({
        spinner: true,
        message: `Uploading ${files.length} files.`,
        timeout: 2000
      });
    },
    triggerUpload() {
      this.$refs['uploadBtnTrigger']?.click();
    },
    filterMethod(dataArray, filter) {
      return filter && (0,functions.checkIfObject)(filter) && Object.values(filter).join('') ? (filter?.search ? (0,functions.searchInObjectArray)(dataArray, filter?.search, ['filename', 'uploaded_by']) : dataArray).filter(data => {
        let res = true;
        // Filter Owner
        if (filter?.owner) switch (filter?.owner) {
          case 'me':
            res = data.uploaded_by === this.user?.id;
            break;
          case 'others':
            res = data.uploaded_by !== this.user?.id;
            break;
          default:
            break;
        }
        return res;
      }) : dataArray.slice();
    },
    // Search
    fetchFromServer(startRow, count, filter, sortBy, descending) {
      const data = this.filterMethod(this.orgFilesOriginal, filter);

      // handle sortBy
      if (sortBy) {
        const sortFn = sortBy === 'desc' ? descending ? (a, b) => a.name > b.name ? -1 : a.name < b.name ? 1 : 0 : (a, b) => a.name > b.name ? 1 : a.name < b.name ? -1 : 0 : descending ? (a, b) => parseFloat(b[sortBy]) - parseFloat(a[sortBy]) : (a, b) => parseFloat(a[sortBy]) - parseFloat(b[sortBy]);
        data.sort(sortFn);
      }
      return data.slice(startRow, startRow + count);
    },
    getRowsNumberCount(filter) {
      if (!filter || !((0,functions.checkIfObject)(filter) && Object.values(filter).join(''))) {
        return this.orgFilesOriginal.length;
      }
      let count = 0;
      this.filterMethod(this.orgFilesOriginal, filter).forEach(e => {
        count++;
      });
      return count;
    },
    onRequest(props) {
      const {
        page,
        rowsPerPage,
        sortBy,
        descending
      } = props.pagination;
      const filter = props.filter;
      this.tableLoading = true;

      // emulate server
      setTimeout(() => {
        // update rowsCount with appropriate value
        this.pagination.rowsNumber = this.getRowsNumberCount(filter);

        // get all rows if "All" (0) is selected
        const fetchCount = rowsPerPage === 0 ? this.pagination.rowsNumber : rowsPerPage;

        // calculate starting row of data
        const startRow = (page - 1) * rowsPerPage;

        // fetch data from "server"
        const returnedData = this.fetchFromServer(startRow, fetchCount, filter, sortBy, descending);

        // clear out existing data and add new
        this.orgFiles.splice(0, this.orgFiles.length, ...returnedData);

        // don't forget to update local pagination object
        this.pagination.page = page;
        this.pagination.rowsPerPage = rowsPerPage;
        this.pagination.sortBy = sortBy;
        this.pagination.descending = descending;

        // ...and turn of loading indicator
        this.tableLoading = false;
      }, 750);
    }
  }
}));
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue?vue&type=script&lang=js
 
// EXTERNAL MODULE: ./node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(11639);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js
var QPage = __webpack_require__(69885);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js
var QCard = __webpack_require__(44458);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbar.js
var QToolbar = __webpack_require__(51663);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbarTitle.js
var QToolbarTitle = __webpack_require__(81973);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js
var QCardSection = __webpack_require__(63190);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/separator/QSeparator.js
var QSeparator = __webpack_require__(50926);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn-group/QBtnGroup.js
var QBtnGroup = __webpack_require__(67236);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js
var QBtn = __webpack_require__(68879);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules
var QInput = __webpack_require__(66611);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js
var QIcon = __webpack_require__(22857);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/select/QSelect.js + 1 modules
var QSelect = __webpack_require__(26384);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItem.js
var QItem = __webpack_require__(490);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItemSection.js
var QItemSection = __webpack_require__(76749);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItemLabel.js
var QItemLabel = __webpack_require__(33115);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTable.js + 7 modules
var QTable = __webpack_require__(50113);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/linear-progress/QLinearProgress.js
var QLinearProgress = __webpack_require__(8289);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTr.js
var QTr = __webpack_require__(31233);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTh.js
var QTh = __webpack_require__(21682);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTd.js
var QTd = __webpack_require__(67220);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js + 1 modules
var QVirtualScroll = __webpack_require__(52482);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/pagination/QPagination.js
var QPagination = __webpack_require__(80996);
// EXTERNAL MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js
var runtime_auto_import = __webpack_require__(69984);
var runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(FilesPagevue_type_script_lang_js, [['render',render]])

/* harmony default export */ const FilesPage = (__exports__);
;





















runtime_auto_import_default()(FilesPagevue_type_script_lang_js, 'components', {QPage: QPage/* default */.Z,QCard: QCard/* default */.Z,QToolbar: QToolbar/* default */.Z,QToolbarTitle: QToolbarTitle/* default */.Z,QCardSection: QCardSection/* default */.Z,QSeparator: QSeparator/* default */.Z,QBtnGroup: QBtnGroup/* default */.Z,QBtn: QBtn/* default */.Z,QInput: QInput/* default */.Z,QIcon: QIcon/* default */.Z,QSelect: QSelect/* default */.Z,QItem: QItem/* default */.Z,QItemSection: QItemSection/* default */.Z,QItemLabel: QItemLabel/* default */.Z,QTable: QTable/* default */.Z,QLinearProgress: QLinearProgress/* default */.Z,QTr: QTr/* default */.Z,QTh: QTh/* default */.Z,QTd: QTd/* default */.Z,QVirtualScroll: QVirtualScroll/* default */.Z,QPagination: QPagination/* default */.Z});


/***/ })

}]);
//# sourceMappingURL=216.98f5a3a2.js.map