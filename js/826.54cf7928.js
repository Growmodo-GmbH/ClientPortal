"use strict";(globalThis["webpackChunkgrowmodo_hub"]=globalThis["webpackChunkgrowmodo_hub"]||[]).push([[826],{7826:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(9835);function s(e,t,n,s,i,a){const l=(0,o.up)("AuthorizationForm"),r=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(r,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{onSuccess:e.onLoginResponse,onFailed:e.onLoginResponse},null,8,["onSuccess","onFailed"])])),_:1})}const i=(0,o.Uk)(" Authentication "),a={class:"row"},l=(0,o._)("span",{class:"text-body2 font-medium q-px-xl"},"Login",-1),r={class:"q-px-md row items-center justify-center"},u=(0,o._)("span",{class:"text-body2 font-medium"}," Verifying ",-1);function c(e,t,n,s,c,d){const p=(0,o.up)("q-icon"),m=(0,o.up)("q-toolbar-title"),g=(0,o.up)("q-toolbar"),h=(0,o.up)("q-input"),w=(0,o.up)("InputPassword"),_=(0,o.up)("q-space"),y=(0,o.up)("q-spinner"),f=(0,o.up)("q-btn"),b=(0,o.up)("q-form"),x=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(x,{style:{width:"500px","max-width":"80vw","border-radius":"15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{size:"lg",color:"primary",name:"img:favicon.png"}),(0,o.Wm)(m,{class:"text-body1 font-medium"},{default:(0,o.w5)((()=>[i])),_:1})])),_:1}),(0,o.Wm)(b,{onSubmit:e.loginWithPwd,ref:"authorization_form",class:"q-pa-md q-gutter-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(h,{rounded:"",outlined:"",autofocus:"",clearable:"","lazy-rules":"",autocomplete:"","clear-icon":"icon-x-close",label:"Username or Userid",modelValue:e.u_useridentity,"onUpdate:modelValue":t[0]||(t[0]=t=>e.u_useridentity=t),rules:[t=>e.checker.input(!!t||"",250)]},{prepend:(0,o.w5)((()=>[(0,o.Wm)(p,{size:"xs",name:"icon-user-03"})])),_:1},8,["modelValue","rules"])]),(0,o._)("div",null,[(0,o.Wm)(w,{withicon:"",rounded:"",outlined:"",clearable:"","lazy-rules":"",autocomplete:"",dense:!1,label:"Password","clear-icon":"icon-x-close",modelValue:e.u_password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.u_password=t),rules:[t=>e.checker.input(!!t||"",250)]},null,8,["modelValue","rules"])]),(0,o._)("div",a,[(0,o.Wm)(_),(0,o.Wm)(f,{ripple:"","no-caps":"",rounded:"",size:"16px",unelevated:"",color:"primary",loading:e.decrypting.status,percentage:e.decrypting.percentage,onClick:e.submitValidation},{loading:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(y,{size:"xs",class:"on-left"}),u])])),default:(0,o.w5)((()=>[l])),_:1},8,["loading","percentage","onClick"])])])),_:1},8,["onSubmit"])])),_:1})}var d=n(4877),p=n(8201),m=n(1809),g=n(7838);const h=(0,o.aZ)({name:"AuthorizationForm",data(){return{checker:d.ZZ,loginAnimate:null,u_useridentity:null,u_password:null,interval:null,login_response:null,decrypting:{status:!1,percentage:0}}},watch:{login_response:{async handler(e){e&&((0,d.NS)(this.loginAnimate),setTimeout((()=>{this.decrypting.status=!1}),500))},deep:!0}},emits:["success","failed","loading"],methods:{...(0,m.nv)(g.Z,["loginWithPassword"]),submitValidation(){const e=this.$refs.authorization_form;e&&e.submit()},async loginWithPwd(){var e;this.loginLoading(),this.login_response=null;const t={username:this.u_useridentity,password:this.u_password};this.$emit("loading",t),console.log("Trying API",t);const n=await this.loginWithPassword(t);this.login_response=n||{},console.log(this.login_response),this.$emit(null!==(e=this.login_response)&&void 0!==e&&e.success?"success":"failed",this.login_response||{})},async loginLoading(e){this.decrypting.status=!0,this.loginAnimate=setInterval((()=>{this.decrypting.percentage+=Math.floor(8*Math.random()+10),this.decrypting.percentage>=100&&(e&&e(),this.decrypting.status=!1,(0,d.NS)(this.loginAnimate))}),1e3)}},components:{InputPassword:p.Z}});var w=n(1639),_=n(9892),y=n(1663),f=n(2857),b=n(1973),x=n(8326),Z=n(6611),v=n(136),q=n(4455),W=n(3902),z=n(9984),A=n.n(z);const k=(0,w.Z)(h,[["render",c]]),P=k;A()(h,"components",{QCard:_.Z,QToolbar:y.Z,QIcon:f.Z,QToolbarTitle:b.Z,QForm:x.Z,QInput:Z.Z,QSpace:v.Z,QBtn:q.Z,QSpinner:W.Z});const Q=(0,o.aZ)({name:"AuthorizationPage",data(){return{title:"Authorization"}},components:{AuthorizationForm:P},async mounted(){this.$root.setMeta({title:this.title})},methods:{onLoginResponse(e){console.log(e),null!==e&&void 0!==e&&e.success&&this.redirectOnLogin()},redirectOnLogin(){this.$router.push(this.$route.query.redirect||"/")}}});var V=n(9885);const L=(0,w.Z)(Q,[["render",s]]),S=L;A()(Q,"components",{QPage:V.Z})}}]);