"use strict";
(globalThis["webpackChunkgrowmodo_hub"] = globalThis["webpackChunkgrowmodo_hub"] || []).push([[95],{

/***/ 2718:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ FilesPage)
});

// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm-bundler.js + 6 modules
var vue_esm_bundler = __webpack_require__(6646);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/FilesPage.vue?vue&type=template&id=88927410

const _hoisted_1 = {
  class: "font-medium text-h5 text-primary-700"
};
const _hoisted_2 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("div", {
  class: "text-h5 font-medium letter-space-normal"
}, " Attached files ", -1);
const _hoisted_3 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("div", {
  class: "text-body1 font-regular text-primary-500"
}, " Files and assets that have been attached to this project. ", -1);
const _hoisted_4 = {
  class: "col-12 col-md-6"
};
const _hoisted_5 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body1 font-medium"
}, "View All", -1);
const _hoisted_6 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body1 font-medium"
}, "Your Files", -1);
const _hoisted_7 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body1 font-medium"
}, "Delivered Files", -1);
const _hoisted_8 = {
  class: "col-12 col-md-6"
};
const _hoisted_9 = {
  class: "row q-col-gutter-md items-center justify-end text-right"
};
const _hoisted_10 = {
  class: "col-12 col-md-9"
};
const _hoisted_11 = {
  key: 0
};
const _hoisted_12 = {
  class: "bg-color absolute-top table-loader",
  style: {
    "top": "87px"
  }
};
const _hoisted_13 = {
  class: "text-body2 font-medium text-primary-500"
};
const _hoisted_14 = /*#__PURE__*/(0,vue_esm_bundler/* createElementVNode */._)("span", {
  class: "text-body2 font-medium text-transparent"
}, " Options ", -1);
const _hoisted_15 = {
  key: 0,
  class: "row items-center q-gutter-x-md"
};
const _hoisted_16 = {
  class: "col-auto"
};
const _hoisted_17 = {
  class: "row q-gutter-x-md"
};
const _hoisted_18 = {
  class: "text-right"
};
const _hoisted_19 = {
  key: 0,
  class: "q-py-md row full-width items-center justify-center q-col-gutter-sm q-virtual-scroll--skip"
};
const _hoisted_20 = {
  class: "q-py-md row full-width items-center justify-between q-col-gutter-sm q-virtual-scroll--skip"
};
const _hoisted_21 = {
  class: "full-width text-center"
};
const _hoisted_22 = {
  class: "full-width row flex-center text-primary-500"
};
const _hoisted_23 = {
  class: "text-body2 text-primary-500 font-medium"
};
const _hoisted_24 = {
  key: 0,
  class: "full-width row flex-center text-primary-500 q-pt-sm"
};
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_q_toolbar_title = (0,vue_esm_bundler/* resolveComponent */.up)("q-toolbar-title");
  const _component_q_toolbar = (0,vue_esm_bundler/* resolveComponent */.up)("q-toolbar");
  const _component_q_card = (0,vue_esm_bundler/* resolveComponent */.up)("q-card");
  const _component_FileUploader = (0,vue_esm_bundler/* resolveComponent */.up)("FileUploader");
  const _component_q_card_section = (0,vue_esm_bundler/* resolveComponent */.up)("q-card-section");
  const _component_q_separator = (0,vue_esm_bundler/* resolveComponent */.up)("q-separator");
  const _component_q_btn = (0,vue_esm_bundler/* resolveComponent */.up)("q-btn");
  const _component_q_btn_group = (0,vue_esm_bundler/* resolveComponent */.up)("q-btn-group");
  const _component_q_icon = (0,vue_esm_bundler/* resolveComponent */.up)("q-icon");
  const _component_q_input = (0,vue_esm_bundler/* resolveComponent */.up)("q-input");
  const _component_q_item_label = (0,vue_esm_bundler/* resolveComponent */.up)("q-item-label");
  const _component_q_item_section = (0,vue_esm_bundler/* resolveComponent */.up)("q-item-section");
  const _component_q_item = (0,vue_esm_bundler/* resolveComponent */.up)("q-item");
  const _component_q_select = (0,vue_esm_bundler/* resolveComponent */.up)("q-select");
  const _component_q_linear_progress = (0,vue_esm_bundler/* resolveComponent */.up)("q-linear-progress");
  const _component_q_breadcrumbs_el = (0,vue_esm_bundler/* resolveComponent */.up)("q-breadcrumbs-el");
  const _component_q_breadcrumbs = (0,vue_esm_bundler/* resolveComponent */.up)("q-breadcrumbs");
  const _component_q_th = (0,vue_esm_bundler/* resolveComponent */.up)("q-th");
  const _component_q_tr = (0,vue_esm_bundler/* resolveComponent */.up)("q-tr");
  const _component_q_skeleton = (0,vue_esm_bundler/* resolveComponent */.up)("q-skeleton");
  const _component_q_td = (0,vue_esm_bundler/* resolveComponent */.up)("q-td");
  const _component_CardIconBox = (0,vue_esm_bundler/* resolveComponent */.up)("CardIconBox");
  const _component_q_list = (0,vue_esm_bundler/* resolveComponent */.up)("q-list");
  const _component_q_menu = (0,vue_esm_bundler/* resolveComponent */.up)("q-menu");
  const _component_q_pagination = (0,vue_esm_bundler/* resolveComponent */.up)("q-pagination");
  const _component_q_table = (0,vue_esm_bundler/* resolveComponent */.up)("q-table");
  const _component_dynamic_dialog_confirmation = (0,vue_esm_bundler/* resolveComponent */.up)("dynamic-dialog-confirmation");
  const _component_q_dialog = (0,vue_esm_bundler/* resolveComponent */.up)("q-dialog");
  const _component_RenameFile = (0,vue_esm_bundler/* resolveComponent */.up)("RenameFile");
  const _component_image_lightbox = (0,vue_esm_bundler/* resolveComponent */.up)("image-lightbox");
  const _component_q_page = (0,vue_esm_bundler/* resolveComponent */.up)("q-page");
  return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_page, {
    padding: "",
    class: "container"
  }, {
    default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      flat: "",
      bordered: "",
      class: "rounded card-padding-title"
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar, {
        class: "q-pa-none no-min-height"
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar_title, null, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_1, (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.title), 1)]),
          _: 1
        })]),
        _: 1
      })]),
      _: 1
    }), (0,vue_esm_bundler/* createElementVNode */._)("div", {
      class: (0,vue_esm_bundler/* normalizeClass */.C_)(["rounded q-my-lg", {
        ['cursor-not-allowed']: !_ctx.route_path || _ctx.route_path == '/' || !_ctx.path || _ctx.path == '/'
      }])
    }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_FileUploader, {
      ref: "filesUploader",
      removedFile: _ctx.removedFile,
      "max-file-size": "10000000",
      note: "Image/*, AI, EPS, PSD, FIG, XD, WOFF, WOFF2, TTF, OTF (max. 10MB)",
      accept: "image/*, .psd, .ai, .eps, .fig, .xd, .woff2, .woff, .ttf, .otf",
      onAdded: _ctx.filesAddedQued,
      onUploaded: _ctx.uploadedEvent,
      onFailed: _ctx.failedEvent,
      factory: _ctx.factoryFn,
      class: (0,vue_esm_bundler/* normalizeClass */.C_)({
        ['cursor-not-allowed no-pointer-events']: !_ctx.route_path || _ctx.route_path == '/' || !_ctx.path || _ctx.path == '/'
      })
    }, null, 8, ["removedFile", "onAdded", "onUploaded", "onFailed", "factory", "class"])], 2), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      flat: "",
      bordered: ""
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card_section, {
        class: "card-padding-title"
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar, {
          class: "text-primary q-pa-none"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_toolbar_title, null, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_2, _hoisted_3]),
            _: 1
          })]),
          _: 1
        })]),
        _: 1
      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_card_section, {
        class: "row q-col-gutter-md items-center justify-between q-py-md card-padding-title"
      }, {
        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn_group, {
          spread: _ctx.$q.screen.sm || _ctx.$q.screen.lt.md,
          class: "rounded no-shadow border-add"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === '' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === '' ? 'secondary' : 'primary-600',
            onClick: _cache[0] || (_cache[0] = $event => _ctx.ownerFilter = '')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_5]),
            _: 1
          }, 8, ["color", "class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator, {
            vertical: ""
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === 'me' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === 'me' ? 'secondary' : 'primary-600',
            onClick: _cache[1] || (_cache[1] = $event => _ctx.ownerFilter = 'me')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_6]),
            _: 1
          }, 8, ["color", "class"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator, {
            vertical: ""
          }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
            flat: "",
            "no-caps": "",
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-text-secondary", _ctx.ownerFilter === 'others' ? 'bg-accent' : '']),
            color: _ctx.ownerFilter === 'others' ? 'secondary' : 'primary-600',
            onClick: _cache[2] || (_cache[2] = $event => _ctx.ownerFilter = 'others')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_7]),
            _: 1
          }, 8, ["color", "class"])]),
          _: 1
        }, 8, ["spread"])]), (0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_8, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_9, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_10, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          modelValue: _ctx.searchQuery,
          "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => _ctx.searchQuery = $event),
          dense: "",
          outlined: "",
          clearable: "",
          debounce: "500",
          "input-class": "text-body1 font-medium text-primary",
          placeholder: "Search for files",
          "clear-icon": "icon-x-close"
        }, {
          prepend: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            name: "icon-search-lg",
            class: "hover-text-secondary"
          })]),
          _: 1
        }, 8, ["modelValue"])]),  false ? (0) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)])])]),
        _: 1
      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_separator), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_table, {
        "row-key": "id",
        filteredSortedRows: "",
        "binary-state-sort": "",
        rows: _ctx.orgFiles,
        columns: _ctx.columns,
        color: "primary",
        loading: _ctx.tableLoading,
        "rows-per-page-label": "Files per page",
        "no-results-label": "The filter didn't uncover any results.",
        "no-data-label": "I didn't find anything for you.",
        "loading-label": "Getting data from the server.",
        "rows-per-page-options": [10, 20, 30, 50, 50, 0],
        style: {
          "max-height": "950px"
        },
        selection: "multiple",
        pagination: _ctx.pagination,
        "onUpdate:pagination": _cache[8] || (_cache[8] = $event => _ctx.pagination = $event),
        selected: _ctx.selectedFiles,
        "onUpdate:selected": _cache[9] || (_cache[9] = $event => _ctx.selectedFiles = $event),
        "visible-columns": _ctx.visibleColumns,
        "virtual-scroll": "",
        onRequest: _ctx.onRequest
      }, {
        loading: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_12, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_linear_progress, {
          size: "2px",
          indeterminate: "",
          color: "secondary"
        })])]),
        header: (0,vue_esm_bundler/* withCtx */.w5)(scope => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_tr, {
          class: "bg-white",
          style: {
            "position": "sticky",
            "top": "0px",
            "z-index": "2"
          }
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_th, {
            colspan: "100%",
            class: "text-left"
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_breadcrumbs, {
              "active-color": "primary-500",
              "separator-color": "primary-500",
              gutter: "xs"
            }, {
              separator: (0,vue_esm_bundler/* withCtx */.w5)(() => [_ctx.split_path[1] ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_icon, {
                key: 0,
                size: "xs",
                name: "icon-chevron-right",
                class: "q-py-xs"
              })) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)]),
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(_ctx.split_path, (d, i) => {
                return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_breadcrumbs_el, {
                  key: d + i,
                  label: _ctx.generatePath(d, i)?.name,
                  class: (0,vue_esm_bundler/* normalizeClass */.C_)(["text-body2 rounded letter-space-normal", {
                    ['text-secondary']: i === _ctx.split_path.length - 1 || !_ctx.split_path[1]
                  }]),
                  to: `?path=${_ctx.generatePath(d, i)?.path_query}`,
                  onClick: (0,vue_esm_bundler/* withModifiers */.iM)($event => _ctx.path = _ctx.generatePath(d, i)?.path_query || '/', ["prevent"])
                }, null, 8, ["label", "class", "to", "onClick"]);
              }), 128))]),
              _: 1
            })]),
            _: 1
          })]),
          _: 1
        }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_tr, {
          class: "bg-color",
          style: {
            "position": "sticky",
            "top": "43px",
            "z-index": "3"
          }
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_th, {
            "auto-width": "",
            class: "cursor-pointer hover-text-secondary text-left",
            onClick: (0,vue_esm_bundler/* withModifiers */.iM)($event => scope.selected = !scope.selected, ["stop"])
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
              flat: "",
              round: "",
              size: "sm",
              name: scope.selected ? 'icon-check-square' : 'icon-square',
              color: scope.selected || _ctx.selectedFiles.length ? 'secondary' : 'primary-500'
            }, null, 8, ["name", "color"])]),
            _: 2
          }, 1032, ["onClick"]), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(scope.cols, (col, i) => {
            return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_th, {
              key: col.name,
              props: scope,
              "auto-width": i !== 0,
              style: (0,vue_esm_bundler/* normalizeStyle */.j5)([{
                "position": "sticky",
                "top": "0",
                "z-index": "4"
              }, i === 0 ? 'padding-left: 0' : ''])
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("span", _hoisted_13, (0,vue_esm_bundler/* toDisplayString */.zw)(col.label), 1)]),
              _: 2
            }, 1032, ["props", "auto-width", "style"]);
          }), 128)), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_th, {
            "auto-width": "",
            class: "text-right",
            style: {
              "position": "sticky",
              "top": "0",
              "z-index": "1"
            }
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_hoisted_14]),
            _: 1
          })]),
          _: 2
        }, 1024)]),
        body: (0,vue_esm_bundler/* withCtx */.w5)(scope => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_tr, {
          props: scope,
          class: (0,vue_esm_bundler/* normalizeClass */.C_)(["hover-bg-accent", {
            [scope.selected ? 'bg-accent' : 'bg-transparent']: true,
            ['no-pointer-events']: _ctx.tableLoading
          }])
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [_ctx.tableLoading ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
            key: 0
          }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, null, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
              type: "rect",
              width: "25px",
              height: "25px"
            })]),
            _: 1
          }), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(scope.cols, (_r, i) => {
            return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_td, {
              key: _r || i,
              class: (0,vue_esm_bundler/* normalizeClass */.C_)({
                ['q-pl-none']: i === 0
              })
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [i === 0 ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_15, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_16, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_CardIconBox, {
                useSpinner: "",
                style: {
                  "padding": "14px",
                  "max-width": "48px",
                  "max-height": "48px"
                }
              })]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
                type: "text",
                class: "col",
                width: "90%",
                height: "50px"
              })])) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_skeleton, {
                key: 1,
                type: "text",
                width: "100%",
                height: "50px"
              }))]),
              _: 2
            }, 1032, ["class"]);
          }), 128)), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, null, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_17, [((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)([1, 2], n => {
              return (0,vue_esm_bundler/* createElementVNode */._)("div", {
                class: "col",
                key: n
              }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_skeleton, {
                type: "circle",
                height: "20px",
                width: "20px"
              })]);
            }), 64))])]),
            _: 1
          })], 64)) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
            key: 1
          }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, {
            class: (0,vue_esm_bundler/* normalizeClass */.C_)([scope.selected ? 'bg-accent' : 'bg-transparent', "cursor-pointer text-primary text-left hover-text-secondary"]),
            onClick: (0,vue_esm_bundler/* withModifiers */.iM)(() => {
              scope.row.folder ? void 0 : scope.selected = !scope.selected;
            }, ["stop"])
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
              flat: "",
              round: "",
              size: "sm",
              name: scope.selected ? 'icon-check-square' : 'icon-square',
              color: scope.row.failed ? 'negative' : scope.selected ? 'secondary' : 'primary-500'
            }, null, 8, ["name", "color"])]),
            _: 2
          }, 1032, ["class", "onClick"]), ((0,vue_esm_bundler/* openBlock */.wg)(true), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, null, (0,vue_esm_bundler/* renderList */.Ko)(scope.cols, (_r, i) => {
            return (0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_td, {
              key: _r.name || i,
              props: scope,
              class: (0,vue_esm_bundler/* normalizeClass */.C_)([{
                'cursor-pointer': i === 0,
                [scope.selected ? 'bg-accent' : 'bg-transparent']: true,
                ['text-negative']: scope.row.failed,
                ['text-primary-500']: scope.row.uploading
              }, "text-primary"]),
              "file-id": scope.row.id,
              style: (0,vue_esm_bundler/* normalizeStyle */.j5)(i === 0 ? 'padding-left: 0' : ''),
              onClick: () => {
                i === 0 ? scope.row.folder ? _ctx.path = scope.row.path_query : scope.row.path && !_ctx.checkFileExtensions(_r.value, ['ico', 'jpg', 'jpeg', 'png', 'svg', 'gif']) ? _ctx.$downloadItem(`${_ctx.$cdn_host}/${scope.row.path}`, scope.row.file) : void 0 : void 0;
              }
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [i === 0 ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                key: 0,
                class: "text-body2 q-pa-none"
              }, {
                default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                  avatar: "",
                  style: {
                    "min-width": "unset"
                  },
                  class: "q-pr-sm"
                }, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_CardIconBox, {
                    icon: scope.row.folder ? 'icon-folder-black' : _ctx.getFileTypeIcon(_r.value),
                    iconColor: scope.row.failed ? 'negative' : 'secondary',
                    style: (0,vue_esm_bundler/* normalizeStyle */.j5)(scope.row.uploading ? 'padding: 14px; max-width: 48px; max-height: 48px' : ''),
                    useSpinner: scope.row.uploading
                  }, null, 8, ["icon", "iconColor", "style", "useSpinner"])]),
                  _: 2
                }, 1024), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("span", {
                    class: (0,vue_esm_bundler/* normalizeClass */.C_)(i === 0 ? 'font-medium' : '')
                  }, (0,vue_esm_bundler/* toDisplayString */.zw)(_r.value), 3)]),
                  _: 2
                }, 1024), !scope.row.uploading ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_menu, {
                  key: 0,
                  "auto-close": "",
                  "context-menu": ""
                }, {
                  default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_list, {
                    separator: ""
                  }, {
                    default: (0,vue_esm_bundler/* withCtx */.w5)(() => [scope.row.folder ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                      key: 0,
                      clickable: "",
                      class: "hover-text-secondary",
                      onClick: $event => _ctx.path = scope.row.path_query
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-folder",
                          size: "xs"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Open")]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), scope.row.folder ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                      key: 1,
                      clickable: "",
                      class: "hover-text-secondary",
                      onClick: $event => _ctx.openURL(`${_ctx.$route.path}?path=${scope.row.path_query}`)
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-link-external-01",
                          size: "xs"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Open in New Tab")]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), !scope.row.folder ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)(vue_esm_bundler/* Fragment */.HY, {
                      key: 2
                    }, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item, {
                      clickable: "",
                      class: "hover-text-secondary",
                      onClick: $event => _ctx.$downloadItem(`${_ctx.$cdn_host}/${scope.row.path}`, scope.row.file)
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-download-02",
                          size: "xs"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Download")]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"]), _ctx.selectedFiles?.length ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                      key: 0,
                      clickable: "",
                      class: "hover-text-secondary",
                      onClick: () => {
                        if (_ctx.selectedFiles?.length) {
                          _ctx.downloadZip();
                        } else {
                          _ctx.downloadZip([scope.row]);
                        }
                      }
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-download-04",
                          size: "xs"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)((0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.selectedFiles?.length ? `Download Zip (${_ctx.selectedFiles?.length} file${_ctx.selectedFiles?.length > 1 ? 's' : ''})` : 'Download as Zip'), 1)]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item, {
                      clickable: "",
                      class: "hover-text-secondary",
                      onClick: () => {
                        _ctx.fileToRename = scope.row;
                        _ctx.openRenameDialog = true;
                      }
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-edit-03",
                          size: "xs"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Rename")]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item, {
                      clickable: "",
                      class: "text-negative hover-text-negative",
                      onClick: () => {
                        if (scope.row.failed) {
                          _ctx.deleteFilesLocally(scope?.row);
                        } else {
                          _ctx.openDeleteDialog = true;
                          _ctx.fileToDelete = scope?.row;
                        }
                      }
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-trash-01",
                          size: "xs",
                          color: "negative"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)("Delete")]),
                        _: 1
                      })]),
                      _: 2
                    }, 1032, ["onClick"]), _ctx.selectedFiles?.length ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_item, {
                      key: 1,
                      clickable: "",
                      class: "text-negative hover-text-negative",
                      onClick: _cache[5] || (_cache[5] = () => {
                        _ctx.openMultiDeleteDialog = true;
                      })
                    }, {
                      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, {
                        side: "",
                        class: "q-pr-sm"
                      }, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                          name: "icon-trash-01",
                          size: "xs",
                          color: "negative"
                        })]),
                        _: 1
                      }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_item_section, null, {
                        default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createTextVNode */.Uk)(" Delete Selected (" + (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.selectedFiles?.length) + " file" + (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.selectedFiles?.length > 1 ? 's' : '') + ")", 1)]),
                        _: 1
                      })]),
                      _: 1
                    })) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)], 64)) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)]),
                    _: 2
                  }, 1024)]),
                  _: 2
                }, 1024)) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)]),
                _: 2
              }, 1024)) : ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("span", {
                key: 1,
                class: (0,vue_esm_bundler/* normalizeClass */.C_)(["text-body2 text-primary-500", i === 0 ? 'font-medium' : ''])
              }, (0,vue_esm_bundler/* toDisplayString */.zw)(_r.value), 3))]),
              _: 2
            }, 1032, ["props", "class", "file-id", "style", "onClick"]);
          }), 128)), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_td, {
            class: (0,vue_esm_bundler/* normalizeClass */.C_)(scope.selected ? 'bg-accent' : 'bg-transparent')
          }, {
            default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_18, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "sm",
              color: "primary-500",
              class: (0,vue_esm_bundler/* normalizeClass */.C_)({
                ['hover-text-secondary']: !_ctx.tableLoading
              }),
              disable: _ctx.tableLoading,
              onClick: $event => _ctx.copyToClipboard(scope.row.folder ? `${_ctx.location.protocol}//${_ctx.location.host}${_ctx.$route.path}?path=${scope.row.path_query}` : `${_ctx.$cdn_host}/${scope.row.path}`, 'Url has been copied to clipboard.')
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                name: "icon-link-external-01",
                size: "20px"
              })]),
              _: 2
            }, 1032, ["class", "disable", "onClick"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "sm",
              color: "primary-500",
              class: (0,vue_esm_bundler/* normalizeClass */.C_)({
                ['hover-text-secondary']: !_ctx.tableLoading && !scope.row.folder
              }),
              disable: _ctx.tableLoading || scope.row.folder,
              onClick: $event => _ctx.$downloadItem(`${_ctx.$cdn_host}/${scope.row.path}`, scope.row.file)
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                name: "icon-download-02",
                size: "20px"
              })]),
              _: 2
            }, 1032, ["class", "disable", "onClick"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "sm",
              color: "primary-500",
              class: (0,vue_esm_bundler/* normalizeClass */.C_)({
                ['hover-text-negative']: !_ctx.tableLoading && !scope.row.folder
              }),
              disable: _ctx.tableLoading || scope.row.folder,
              onClick: () => {
                if (scope.row.failed) {
                  _ctx.deleteFilesLocally(scope?.row);
                } else {
                  _ctx.openDeleteDialog = true;
                  _ctx.fileToDelete = scope?.row;
                }
              }
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                name: "icon-trash-01",
                size: "20px"
              })]),
              _: 2
            }, 1032, ["class", "disable", "onClick"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
              flat: "",
              round: "",
              size: "sm",
              color: "primary-500",
              class: (0,vue_esm_bundler/* normalizeClass */.C_)({
                ['hover-text-secondary']: !_ctx.tableLoading && !scope.row.folder
              }),
              disable: _ctx.tableLoading || scope.row.folder,
              onClick: () => {
                _ctx.fileToRename = scope.row;
                _ctx.openRenameDialog = true;
              }
            }, {
              default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
                name: "icon-edit-01",
                size: "20px"
              })]),
              _: 2
            }, 1032, ["class", "disable", "onClick"])])]),
            _: 2
          }, 1032, ["class"])], 64))]),
          _: 2
        }, 1032, ["props", "class"])]),
        bottom: (0,vue_esm_bundler/* withCtx */.w5)(scope => [ false ? (0) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)]),
        "no-data": (0,vue_esm_bundler/* withCtx */.w5)(({
          icon,
          message
        }) => [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_21, [(0,vue_esm_bundler/* createElementVNode */._)("div", _hoisted_22, [_ctx.path == '/' || !_ctx.path || _ctx.tableLoading || _ctx.searchQuery ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createBlock */.j4)(_component_q_icon, {
          key: 0,
          size: "sm",
          class: "q-pr-sm",
          color: _ctx.tableLoading ? 'secondary' : 'negative',
          name: _ctx.tableLoading ? 'icon-download-cloud-01' : _ctx.searchQuery ? 'icon-filter-funnel-01' : icon
        }, null, 8, ["color", "name"])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true), (0,vue_esm_bundler/* createElementVNode */._)("span", _hoisted_23, (0,vue_esm_bundler/* toDisplayString */.zw)(_ctx.searchQuery && !_ctx.tableLoading ? 'No files found.' : message), 1)]), _ctx.path !== '/' && _ctx.path !== '' && !_ctx.tableLoading && !_ctx.searchQuery ? ((0,vue_esm_bundler/* openBlock */.wg)(), (0,vue_esm_bundler/* createElementBlock */.iD)("div", _hoisted_24, [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
          "no-caps": "",
          unelevated: "",
          class: "text-body1 font-medium button-sm",
          onClick: _ctx.openUploader,
          color: "primary"
        }, {
          default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_q_icon, {
            name: "icon-upload-01",
            size: "20px",
            class: "q-pr-xs"
          }), (0,vue_esm_bundler/* createTextVNode */.Uk)(" Upload Files ")]),
          _: 1
        }, 8, ["onClick"])])) : (0,vue_esm_bundler/* createCommentVNode */.kq)("", true)])]),
        _: 1
      }, 8, ["rows", "columns", "loading", "pagination", "selected", "visible-columns", "onRequest"])]),
      _: 1
    }), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_dialog, {
      modelValue: _ctx.openMultiDeleteDialog,
      "onUpdate:modelValue": _cache[10] || (_cache[10] = $event => _ctx.openMultiDeleteDialog = $event)
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_dynamic_dialog_confirmation, (0,vue_esm_bundler/* mergeProps */.dG)({
        ..._ctx.$root.messagesDialogs.confirmDelete,
        messageTitle: `Confirm to delete ${_ctx.selectedFiles?.length} files?`
      }, {
        onOkay: _ctx.deleteSelectedFiles
      }), null, 16, ["onOkay"])]),
      _: 1
    }, 8, ["modelValue"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_dialog, {
      modelValue: _ctx.openDeleteDialog,
      "onUpdate:modelValue": _cache[12] || (_cache[12] = $event => _ctx.openDeleteDialog = $event)
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_dynamic_dialog_confirmation, (0,vue_esm_bundler/* mergeProps */.dG)({
        ..._ctx.$root.messagesDialogs.confirmDelete,
        messageTitle: `Confirm to delete ${_ctx.fileToDelete.file}?`
      }, {
        onOkay: _cache[11] || (_cache[11] = $event => _ctx.deleteFilesLocally(_ctx.fileToDelete))
      }), null, 16)]),
      _: 1
    }, 8, ["modelValue"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_q_dialog, {
      modelValue: _ctx.openRenameDialog,
      "onUpdate:modelValue": _cache[14] || (_cache[14] = $event => _ctx.openRenameDialog = $event)
    }, {
      default: (0,vue_esm_bundler/* withCtx */.w5)(() => [(0,vue_esm_bundler/* createVNode */.Wm)(_component_RenameFile, {
        file: _ctx.fileToRename,
        onClose: _cache[13] || (_cache[13] = $event => _ctx.openRenameDialog = false),
        onSuccess: _ctx.fileRenameUpdate
      }, null, 8, ["file", "onSuccess"])]),
      _: 1
    }, 8, ["modelValue"]), (0,vue_esm_bundler/* createVNode */.Wm)(_component_image_lightbox, {
      visible: _ctx.showLightBox,
      imgs: _ctx.lightboxImages,
      index: _ctx.lightboxIndex,
      onHide: _cache[15] || (_cache[15] = $event => _ctx.showLightBox = false)
    }, null, 8, ["visible", "imgs", "index"])]),
    _: 1
  });
}
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue?vue&type=template&id=88927410

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(6727);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var es_array_push = __webpack_require__(9665);
// EXTERNAL MODULE: ./src/components/Helpers/CardIconBox.vue + 4 modules
var CardIconBox = __webpack_require__(6122);
// EXTERNAL MODULE: ./node_modules/pinia/dist/pinia.mjs + 1 modules
var pinia = __webpack_require__(1872);
// EXTERNAL MODULE: ./src/stores/user/index.js + 3 modules
var user = __webpack_require__(3701);
// EXTERNAL MODULE: ./src/stores/helpers/index.js + 3 modules
var helpers = __webpack_require__(1976);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/date.js
var date = __webpack_require__(4170);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/debounce.js
var debounce = __webpack_require__(899);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/format.js
var format = __webpack_require__(321);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/open-url.js
var open_url = __webpack_require__(3752);
// EXTERNAL MODULE: ./node_modules/quasar/src/utils/uid.js
var uid = __webpack_require__(796);
// EXTERNAL MODULE: ./src/assets/scripts/functions.js + 1 modules
var functions = __webpack_require__(1966);
// EXTERNAL MODULE: ./src/components/Helpers/FilesUploader.vue + 4 modules
var FilesUploader = __webpack_require__(2252);
// EXTERNAL MODULE: ./src/components/Dialogs/RenameFile.vue + 4 modules
var RenameFile = __webpack_require__(5816);
// EXTERNAL MODULE: ./src/mixins/index.js + 7 modules
var mixins = __webpack_require__(3458);
// EXTERNAL MODULE: ./src/stores/fn.store.js
var fn_store = __webpack_require__(5487);
;// CONCATENATED MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/@quasar/app-webpack/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/FilesPage.vue?vue&type=script&lang=js











const {
  humanStorageSize
} = format/* default */.ZP;



/* harmony default export */ const FilesPagevue_type_script_lang_js = ((0,vue_esm_bundler/* defineComponent */.aZ)({
  name: 'FilesPage',
  components: {
    CardIconBox: CardIconBox["default"],
    FileUploader: FilesUploader["default"],
    RenameFile: RenameFile/* default */.Z
  },
  mixins: [
  // Uploader functions
  mixins/* FileUploader_Mixin */.GU, mixins/* Helpers_Mixin */.h2],
  data() {
    return {
      title: 'Files and Assets',
      searchQuery: '',
      ownerFilter: '',
      showLightBox: false,
      lightboxIndex: 0,
      lightboxImages: [],
      tableLoading: false,
      removedFile: null,
      selectedFiles: [],
      visibleColumns: [],
      onRequestDelayed: null,
      orgFiles: [],
      fileToRename: null,
      openRenameDialog: false,
      fileToDelete: null,
      openDeleteDialog: false,
      openMultiDeleteDialog: false,
      pagination: {
        descending: true,
        page: 1,
        rowsPerPage: 0,
        rowsNumber: 0
      },
      columns: [{
        name: 'file',
        required: true,
        label: 'Name',
        align: 'left',
        field: row => row.folder ? row.name : row.file,
        format: val => `${val}`,
        sortable: true
      }, {
        name: 'size',
        label: 'File size',
        align: 'left',
        field: row => isNaN(row.size) ? '~' : row.size,
        format: val => val === '~' ? '~' : `${humanStorageSize(Number(val || 0))}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'created_at',
        label: 'Date uploaded',
        align: 'left',
        field: row => row.created_at || '~',
        format: val => val === '~' ? '~' : `${date/* default.formatDate */.ZP.formatDate(val, 'MMM D, YYYY')}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'updated_at',
        label: 'Last updated',
        align: 'left',
        field: row => row.updated_at || '~',
        format: val => val === '~' ? '~' : `${date/* default.formatDate */.ZP.formatDate(val, 'MMM D, YYYY')}`,
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }, {
        name: 'uploader_id',
        label: 'Uploaded by',
        align: 'left',
        field: row => row.uploader_id || '~',
        format: val => val === '~' ? '~' : val === this.user.id ? 'me' : this.selectedOrgUsers?.[val] ? `${this.selectedOrgUsers?.[val]?.firstname} ${this.selectedOrgUsers?.[val]?.lastname}` : 'unknown',
        sortable: true,
        sort: (a, b) => parseInt(a, 10) - parseInt(b, 10)
      }],
      orgFilesOriginal: {},
      path: '/',
      openURL: open_url/* default */.Z
    };
  },
  async mounted() {
    this.$root.setMeta({
      title: this.title
    });
    this.visibleColumns = this.columns.map(c => c.name) // Get all the column names
    .filter(e => !['id'].includes(e)); // Hide some columns initially

    this.onRequestDelayed = (0,debounce/* default */.Z)(this.onRequest, 1000);
    this.onRequest({
      pagination: this.pagination,
      filter: this.filter
    });
    // Direct Link to Path
    if (this.route_path) this.path = this.route_path;
  },
  computed: {
    ...(0,pinia/* mapState */.rn)(user/* default */.Z, ['user', 'selectedOrg', 'selectedOrgFiles', 'selectedOrgUsers', 'selectedOrgBrands']),
    route_path() {
      return this.$route.query.path || '';
    },
    split_path() {
      return this.path.split('/');
    },
    location() {
      return window.location;
    }
  },
  watch: {
    searchQuery: {
      async handler(val) {
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: val,
            owner: this.ownerFilter
          }
        }, 1000);
      }
    },
    ownerFilter: {
      async handler(val) {
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: this.searchQuery,
            owner: this.ownerFilter
          }
        }, 1000);
      }
    },
    path: {
      async handler(val) {
        this.selectedFiles = [];
        this.$router.push({
          query: {
            path: val
          },
          params: {
            savePosition: true
          }
        });
        this.onRequest({
          pagination: this.pagination,
          filter: {
            search: this.searchQuery,
            owner: this.ownerFilter
          }
        }, 1000);
      }
    },
    route_path: {
      async handler(val) {
        if (val !== this.path && this.$route.path == '/files') this.path = val;
      }
    },
    selectedFiles: {
      async handler(val) {
        if (val.filter(e => e.folder)?.length) {
          this.selectedFiles = val.filter(e => !e.folder);
        }
      }
    }
  },
  methods: {
    ...(0,pinia/* mapActions */.nv)(helpers/* default */.Z, ['uploadFile', 'getFiles']),
    generatePath(path_name, path_index) {
      if (!path_name && path_index === 0) return {
        path_query: '/',
        name: 'Organization Files'
      };
      const paths = this.split_path;
      const result = {
        name: path_name,
        path_query: '/' + paths.slice(1, path_index + 1).join('/')
      };
      if (this.isPathOnBrands(paths.slice(0, path_index).join('/'))) {
        const brand = this.selectedOrgBrands[path_name];
        if (brand?.id && brand?.brand_name) {
          result.brand_id = brand.id;
          result.name = brand.brand_name;
        }
      }
      return result;
    },
    downloadZip(src_file, download_filename) {
      const to_download = src_file?.length ? src_file : this.selectedFiles;
      const label = download_filename || 'download';
      const files = [];
      for (const file of to_download) {
        if (!file.folder) {
          files.push({
            url: `${this.$cdn_host}/${file.path}`,
            filename: file.file
          });
        }
      }
      this.$downloadZip(files, label);
    },
    isPathOnBrands(path) {
      if (path === null || path === undefined) path = this.path;
      return !path || path == '/';
    },
    openUploader() {
      try {
        const upModel = this.$refs['filesUploader'];
        upModel.$el.querySelector('.q-uploader__header').firstChild.click();
      } catch (e) {
        console.warn('File uploader error:', e.message);
      }
    },
    factoryFn(files) {
      let target_path = this.path;
      if (target_path.startsWith('/')) target_path = target_path.substring(1, target_path.length);
      if (target_path.endsWith('/')) target_path = target_path.substring(0, target_path.length - 1);
      return new Promise((resolve, reject) => {
        const token = fn_store/* default.getAuth */.Z.getAuth();
        resolve({
          method: 'POST',
          fieldName: 'uploads[0]',
          url: `${this.$config?.api?.baseURL}/file/organizations/${this.selectedOrg.id}`,
          formFields: [{
            name: 'target_path',
            value: target_path
          }],
          headers: [{
            name: 'Authorization',
            value: `Bearer ${token}`
          }],
          withCredentials: false
        });
      });
    },
    updateLightBox() {
      setTimeout(() => {
        if (true) console.log('Updating Lightbox');
        this.lightboxImages = [];
        const images = this.orgFiles.filter(e => this.checkFileExtensions(e.file, ['ico', 'jpg', 'jpeg', 'png', 'svg', 'gif']));
        images.forEach((img, i) => {
          this.lightboxImages.push({
            src: `${this.$cdn_host}/${img.path}`,
            title: img.file,
            alt: img.file
          });
          const el = document.querySelector(`[file-id="${img.id}"]`);
          if (el) el.onclick = () => {
            if (el.attributes?.['file-id']?.value == img.id) {
              this.lightboxIndex = i;
              this.showLightBox = true;
            }
          };
        });
      }, 500);
    },
    dirBack1(path) {
      let newPath = (path || this.path || '').split('/');
      newPath.pop();
      return newPath.join('/');
    },
    fileRenameUpdate(fileInfo) {
      const indexToRename = this.orgFiles.findIndex(e => e.id == fileInfo.id);
      if (indexToRename > -1) this.orgFiles[indexToRename] = fileInfo;
      this.updateLightBox();
    },
    async deleteSelectedFiles() {
      if (this.selectedFiles?.length) {
        for (const file of this.selectedFiles) {
          this.deleteFilesLocally(file);
        }
      }
    },
    async deleteFilesLocally(file) {
      if (file?.file_info) {
        this.$refs?.['filesUploader']?.removeFile?.(file?.file_info);
        this.removedFile = file?.file_info;
      }
      this.selectedFiles = this.selectedFiles.filter(e => e.id != file.id);
      let indexToDelete = -1;
      if (!isNaN(file?.id) && (await this.deleteAction(file))) {
        indexToDelete = this.orgFiles.findIndex(e => e.id == file.id);
      } else {
        indexToDelete = this.orgFiles.findIndex(e => e.file_info?.__key === file.file_info?.__key);
      }
      if (indexToDelete !== -1) this.orgFiles.splice(indexToDelete, 1);
      this.updateLightBox();
    },
    uploadedEvent({
      files,
      xhr
    }) {
      const response = JSON.parse(xhr.response || '{}');
      if (response.success) {
        files.forEach((file, i) => {
          const fileIndex = this.orgFiles.findIndex(e => e.file_info?.__key === file.__key);
          if (fileIndex !== -1) {
            const last_upload = response.data[i];
            const totalDir = this.orgFiles.filter(e => e.folder).length;
            this.orgFiles.splice(fileIndex, 1, last_upload);
          }
        });
      }
      this.updateLightBox();
    },
    failedEvent({
      files,
      xhr
    }) {
      const response = JSON.parse(xhr.response || '{}');
      if (!response.success) {
        files.forEach(file => {
          const fileIndex = this.orgFiles.findIndex(e => e.file_info?.__key === file.__key);
          if (fileIndex !== -1) {
            this.orgFiles[fileIndex].failed = true;
            this.orgFiles[fileIndex].uploading = false;
          }
        });
      }
    },
    filesAddedQued(files) {
      const totalDir = this.orgFiles.filter(e => e.folder).length;
      files.forEach(file => {
        let file_id = (0,uid/* default */.Z)();
        let created_at = new Date();
        this.orgFiles.splice(totalDir, 0, {
          id: file_id,
          uid: file_id,
          file: file.name,
          folder: false,
          uploading: true,
          size: file.size,
          path: file.__img?.src,
          created_at: created_at,
          updated_at: created_at,
          uploader_id: this.user?.id,
          file_info: file
        });
      });
      this.updateLightBox();
    },
    filterMethod(dataArray, filter) {
      return filter && (0,functions.checkIfObject)(filter) && Object.values(filter).join('') ? (filter?.search ? (0,functions.searchInObjectArray)(dataArray, filter?.search, [
      // 'path', // also searching from file path?
      'file', 'name', 'uploader_id']) : dataArray).filter(data => {
        let res = true;
        // Filter Owner
        if (!data.folder && filter?.owner) switch (filter?.owner) {
          case 'me':
            res = data.uploader_id === this.user?.id;
            break;
          case 'others':
            res = data.uploader_id !== this.user?.id;
            break;
          default:
            break;
        }
        return res;
      }) : dataArray.slice();
    },
    // Search
    async fetchFromServer(startRow, count, filter, sortBy, descending) {
      const query = await this.getFiles({
        path: this.path || '/',
        sortBy: sortBy,
        sort: descending ? 'desc' : 'asc'
      });
      const directories = query.data?.directories || [];
      const files = query.data?.files || [];
      // if (this.path !== '/' && this.path !== '') {
      //   // Add directory back navigation
      //   directories.unshift({
      //     id: 'dir-1',
      //     path_query: this.dirBack1(),
      //     folder: true,
      //     name: '..',
      //   });
      // }
      for (const [i, e] of directories.entries()) {
        if (!e.id) e.id = 'dir' + (i + directories.length);
        e.folder = true;
        if (this.isPathOnBrands()) {
          const brand = this.selectedOrgBrands[e.name];
          if (brand?.id && brand?.brand_name) {
            e.brand_id = brand.id;
            e.name = brand.brand_name;
          }
        }
      }

      // Set newData as file
      this.orgFilesOriginal = [...directories, ...files];
      const data = this.filterMethod(this.orgFilesOriginal, filter);

      // handle sortBy
      if (sortBy) {
        const sortFn = sortBy === 'file' ? descending ? (a, b) => a[sortBy] > b[a.folder ? 'name' : 'file'] ? -1 : a[a.folder ? 'name' : 'file'] < b[a.folder ? 'name' : 'file'] ? 1 : 0 : (a, b) => a[a.folder ? 'name' : 'file'] > b[a.folder ? 'name' : 'file'] ? 1 : a[a.folder ? 'name' : 'file'] < b[a.folder ? 'name' : 'file'] ? -1 : 0 : descending ? (a, b) => parseFloat(b[sortBy]) - parseFloat(a[sortBy]) : (a, b) => parseFloat(a[sortBy]) - parseFloat(b[sortBy]);
        data.sort(sortFn);
      }
      return count === 0 ? data : data.slice(startRow, startRow + count);
    },
    getRowsNumberCount(filter) {
      if (!filter || !((0,functions.checkIfObject)(filter) && Object.values(filter).join(''))) {
        return Object.values(this.orgFilesOriginal).length;
      }
      let count = 0;
      this.filterMethod(this.orgFilesOriginal, filter).forEach(e => {
        count++;
      });
      return count;
    },
    onRequest(props) {
      const {
        page,
        rowsPerPage,
        sortBy,
        descending
      } = props.pagination;
      const filter = props.filter;
      this.tableLoading = true;

      // emulate server
      setTimeout(async () => {
        // update rowsCount with appropriate value
        this.pagination.rowsNumber = this.pagination.rowsNumber === 0 ? 0 : this.getRowsNumberCount(filter);

        // get all rows if "All" (0) is selected
        const fetchCount = rowsPerPage === 0 ? this.pagination.rowsNumber || 0 : rowsPerPage;

        // calculate starting row of data
        const startRow = (page - 1) * rowsPerPage;

        // fetch data from "server"
        const returnedData = await this.fetchFromServer(startRow, fetchCount, filter, sortBy, descending);

        // clear out existing data and add new
        this.orgFiles.splice(0, this.orgFiles.length, ...returnedData);

        // don't forget to update local pagination object
        this.pagination.page = page;
        this.pagination.rowsPerPage = rowsPerPage;
        this.pagination.sortBy = sortBy;
        this.pagination.descending = descending;

        // ...and turn of loading indicator
        this.tableLoading = false;
        this.updateLightBox();
      }, 750);
    }
  }
}));
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue?vue&type=script&lang=js
 
// EXTERNAL MODULE: ./node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(1639);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js
var QPage = __webpack_require__(9885);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js
var QCard = __webpack_require__(4458);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbar.js
var QToolbar = __webpack_require__(1663);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/toolbar/QToolbarTitle.js
var QToolbarTitle = __webpack_require__(1973);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js
var QCardSection = __webpack_require__(3190);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/separator/QSeparator.js
var QSeparator = __webpack_require__(926);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn-group/QBtnGroup.js
var QBtnGroup = __webpack_require__(7236);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js
var QBtn = __webpack_require__(8879);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules
var QInput = __webpack_require__(6611);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js
var QIcon = __webpack_require__(2857);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/select/QSelect.js + 2 modules
var QSelect = __webpack_require__(7887);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItem.js
var QItem = __webpack_require__(490);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItemSection.js
var QItemSection = __webpack_require__(1233);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItemLabel.js
var QItemLabel = __webpack_require__(3115);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTable.js + 7 modules
var QTable = __webpack_require__(113);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/linear-progress/QLinearProgress.js
var QLinearProgress = __webpack_require__(8289);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTr.js
var QTr = __webpack_require__(3532);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTh.js
var QTh = __webpack_require__(1682);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/breadcrumbs/QBreadcrumbs.js
var QBreadcrumbs = __webpack_require__(2605);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/breadcrumbs/QBreadcrumbsEl.js
var QBreadcrumbsEl = __webpack_require__(8052);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTd.js
var QTd = __webpack_require__(7220);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/skeleton/QSkeleton.js
var QSkeleton = __webpack_require__(7133);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/menu/QMenu.js
var QMenu = __webpack_require__(6362);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QList.js
var QList = __webpack_require__(3246);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js + 1 modules
var QVirtualScroll = __webpack_require__(2482);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/pagination/QPagination.js
var QPagination = __webpack_require__(996);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js
var QDialog = __webpack_require__(2074);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/uploader/QUploader.js + 7 modules
var QUploader = __webpack_require__(4343);
// EXTERNAL MODULE: ./node_modules/@quasar/app-webpack/lib/webpack/runtime.auto-import.js
var runtime_auto_import = __webpack_require__(9984);
var runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);
;// CONCATENATED MODULE: ./src/pages/FilesPage.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(FilesPagevue_type_script_lang_js, [['render',render]])

/* harmony default export */ const FilesPage = (__exports__);
;




























runtime_auto_import_default()(FilesPagevue_type_script_lang_js, 'components', {QPage: QPage/* default */.Z,QCard: QCard/* default */.Z,QToolbar: QToolbar/* default */.Z,QToolbarTitle: QToolbarTitle/* default */.Z,QCardSection: QCardSection/* default */.Z,QSeparator: QSeparator/* default */.Z,QBtnGroup: QBtnGroup/* default */.Z,QBtn: QBtn/* default */.Z,QInput: QInput/* default */.Z,QIcon: QIcon/* default */.Z,QSelect: QSelect/* default */.Z,QItem: QItem/* default */.Z,QItemSection: QItemSection/* default */.Z,QItemLabel: QItemLabel/* default */.Z,QTable: QTable/* default */.Z,QLinearProgress: QLinearProgress/* default */.Z,QTr: QTr/* default */.Z,QTh: QTh/* default */.Z,QBreadcrumbs: QBreadcrumbs/* default */.Z,QBreadcrumbsEl: QBreadcrumbsEl/* default */.Z,QTd: QTd/* default */.Z,QSkeleton: QSkeleton/* default */.ZP,QMenu: QMenu/* default */.Z,QList: QList/* default */.Z,QVirtualScroll: QVirtualScroll/* default */.Z,QPagination: QPagination/* default */.Z,QDialog: QDialog/* default */.Z,QUploader: QUploader/* default */.Z});


/***/ })

}]);
//# sourceMappingURL=95.9dc3ee7f.js.map